(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1372:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"_1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨mq"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨mq"}},[t._v("#")]),t._v(" 1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ")]),t._v(" "),n("h3",{attrs:{id:"_1ã€æµé‡æ¶ˆå³°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€æµé‡æ¶ˆå³°"}},[t._v("#")]),t._v(" 1ã€æµé‡æ¶ˆå³°")]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœè®¢å•ç³»ç»Ÿæœ€å¤šèƒ½å¤„ç†ä¸€ä¸‡æ¬¡è®¢å•ï¼Œè¿™ä¸ªå¤„ç†èƒ½åŠ›åº”ä»˜æ­£å¸¸æ—¶æ®µçš„ä¸‹å•æ—¶ç»°ç»°æœ‰ä½™ï¼Œæ­£å¸¸æ—¶æ®µæˆ‘ä»¬ä¸‹å•ä¸€ç§’åå°±èƒ½è¿”å›ç»“æœã€‚ä½†æ˜¯åœ¨é«˜å³°æœŸï¼Œå¦‚æœæœ‰ä¸¤ä¸‡æ¬¡ä¸‹å•æ“ä½œç³»ç»Ÿæ˜¯å¤„ç†ä¸äº†çš„ï¼Œåªèƒ½é™åˆ¶è®¢å•è¶…è¿‡ä¸€ä¸‡åä¸å…è®¸ç”¨æˆ·ä¸‹å•ã€‚ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšç¼“å†²ï¼Œæˆ‘ä»¬å¯ä»¥å–æ¶ˆè¿™ä¸ªé™åˆ¶ï¼ŒæŠŠä¸€ç§’å†…ä¸‹çš„è®¢å•åˆ†æ•£æˆä¸€æ®µæ—¶é—´æ¥å¤„ç†ï¼Œè¿™æ—¶æœ‰äº›ç”¨æˆ·å¯èƒ½åœ¨ä¸‹å•åå‡ ç§’åæ‰èƒ½æ”¶åˆ°ä¸‹å•æˆåŠŸçš„æ“ä½œï¼Œä½†æ˜¯æ¯”ä¸èƒ½ä¸‹å•çš„ä½“éªŒè¦å¥½ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"_2ã€åº”ç”¨è§£è€¦"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€åº”ç”¨è§£è€¦"}},[t._v("#")]),t._v(" 2ã€åº”ç”¨è§£è€¦")]),t._v(" "),n("blockquote",[n("p",[t._v("ä»¥ç”µå•†åº”ç”¨ä¸ºä¾‹ï¼Œåº”ç”¨ä¸­æœ‰è®¢å•ç³»ç»Ÿã€åº“å­˜ç³»ç»Ÿã€ç‰©æµç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿã€‚ç”¨æˆ·åˆ›å»ºè®¢å•åï¼Œå¦‚æœè€¦åˆè°ƒç”¨åº“å­˜ç³»ç»Ÿã€ç‰©æµç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªå­ç³»ç»Ÿå‡ºäº†æ•…éšœï¼Œéƒ½ä¼šé€ æˆä¸‹å•æ“ä½œå¼‚å¸¸ã€‚å½“è½¬å˜æˆåŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹å¼åï¼Œç³»ç»Ÿé—´è°ƒç”¨çš„é—®é¢˜ä¼šå‡å°‘å¾ˆå¤šï¼Œæ¯”å¦‚ç‰©æµç³»ç»Ÿå› ä¸ºå‘ç”Ÿæ•…éšœï¼Œéœ€è¦å‡ åˆ†é’Ÿæ¥ä¿®å¤ã€‚åœ¨è¿™å‡ åˆ†é’Ÿçš„æ—¶é—´é‡Œï¼Œç‰©æµç³»ç»Ÿè¦å¤„ç†çš„å†…å­˜è¢«ç¼“å­˜åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”¨æˆ·çš„ä¸‹å•æ“ä½œå¯ä»¥æ­£å¸¸å®Œæˆã€‚å½“ç‰©æµç³»ç»Ÿæ¢å¤åï¼Œç»§ç»­å¤„ç†è®¢å•ä¿¡æ¯å³å¯ï¼Œä¸­å•ç”¨æˆ·æ„Ÿå—ä¸åˆ°ç‰©æµç³»ç»Ÿçš„æ•…éšœï¼Œæå‡ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(488),alt:"image-20220706161100945"}})]),t._v(" "),n("h3",{attrs:{id:"_3ã€å¼‚æ­¥å¤„ç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€å¼‚æ­¥å¤„ç†"}},[t._v("#")]),t._v(" 3ã€å¼‚æ­¥å¤„ç†")]),t._v(" "),n("blockquote",[n("p",[t._v("æœ‰äº›æœåŠ¡é—´è°ƒç”¨æ˜¯å¼‚æ­¥çš„ï¼Œä¾‹å¦‚ A è°ƒç”¨ Bï¼ŒB éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´æ‰§è¡Œï¼Œä½†æ˜¯ A éœ€è¦çŸ¥é“ B ä»€ä¹ˆæ—¶å€™å¯ä»¥æ‰§è¡Œå®Œï¼Œä»¥å‰ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("A è¿‡ä¸€æ®µæ—¶é—´å»è°ƒç”¨ B çš„æŸ¥è¯¢ api æŸ¥è¯¢")]),t._v(" "),n("li",[t._v("A æä¾›ä¸€ä¸ª callback apiï¼Œ B æ‰§è¡Œå®Œä¹‹åè°ƒç”¨ api é€šçŸ¥ A æœåŠ¡ã€‚")])]),t._v(" "),n("p",[t._v("è¿™ä¸¤ç§æ–¹å¼éƒ½ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œä½¿ç”¨æ¶ˆæ¯æ€»çº¿ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒA è°ƒç”¨ B æœåŠ¡åï¼Œåªéœ€è¦ç›‘å¬ B å¤„ç†å®Œæˆçš„æ¶ˆæ¯ï¼Œå½“ B å¤„ç†å®Œæˆåï¼Œä¼šå‘é€ä¸€æ¡æ¶ˆæ¯ç»™ MQï¼ŒMQ ä¼šå°†æ­¤æ¶ˆæ¯è½¬å‘ç»™ A æœåŠ¡ã€‚è¿™æ · A æœåŠ¡æ—¢ä¸ç”¨å¾ªç¯è°ƒç”¨ B çš„æŸ¥è¯¢ apiï¼Œä¹Ÿä¸ç”¨æä¾› callback apiã€‚åŒæ · B æœåŠ¡ä¹Ÿä¸ç”¨åšè¿™äº›æ“ä½œã€‚A æœåŠ¡è¿˜èƒ½åŠæ—¶çš„å¾—åˆ°å¼‚æ­¥å¤„ç†æˆåŠŸçš„æ¶ˆæ¯ã€‚")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(489),alt:"image-20220706162933487"}})]),t._v(" "),n("h2",{attrs:{id:"_2ã€ä»€ä¹ˆæ˜¯rabbitmq"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€ä»€ä¹ˆæ˜¯rabbitmq"}},[t._v("#")]),t._v(" 2ã€ä»€ä¹ˆæ˜¯"),n("code",[t._v("RabbitMQ")])]),t._v(" "),n("blockquote",[n("p",[n("code",[t._v("RabbitMQ")]),t._v("æ˜¯ä¸€ä¸ªæ¶ˆæ¯ä¸­é—´ä»¶ï¼šå®ƒæ¥å—å¹¶è½¬å‘æ¶ˆæ¯ã€‚ä½ å¯ä»¥æŠŠå®ƒå½“åšä¸€ä¸ªå¿«é€’ç«™ç‚¹ï¼Œå½“ä½ è¦å‘é€ä¸€ä¸ªåŒ…è£¹æ—¶ï¼Œä½ æŠŠä½ çš„åŒ…è£¹æ”¾åˆ°å¿«é€’ç«™ï¼Œå¿«é€’å‘˜æœ€ç»ˆä¼šæŠŠä½ çš„å¿«é€’é€åˆ°æ”¶ä»¶äººé‚£é‡Œï¼ŒæŒ‰ç…§è¿™ç§é€»è¾‘"),n("code",[t._v("RabbitMQ")]),t._v("æ˜¯ä¸€ä¸ªå¿«é€’ç«™ï¼Œä¸€ä¸ªå¿«é€’å‘˜å¸®ä½ ä¼ é€’å¿«ä»¶ã€‚"),n("code",[t._v("RabbitMQ")]),t._v("ä¸å¿«é€’ç«™çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå®ƒä¸å¤„ç†å¿«ä»¶è€Œæ˜¯æ¥æ”¶ï¼Œå­˜å‚¨å’Œè½¬å‘æ¶ˆæ¯æ•°æ®ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_3ã€rabbitmqå„ç»„ä»¶çš„åŠŸèƒ½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€rabbitmqå„ç»„ä»¶çš„åŠŸèƒ½"}},[t._v("#")]),t._v(" 3ã€"),n("code",[t._v("RabbitMQ")]),t._v("å„ç»„ä»¶çš„åŠŸèƒ½")]),t._v(" "),n("ul",[n("li",[n("p",[n("strong",[t._v("Server")]),t._v("ï¼šæ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå®ç°"),n("code",[t._v("AMQP")]),t._v("å®ä½“æœåŠ¡ã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Connection")]),t._v("ï¼šè¿æ¥ï¼Œåº”ç”¨ç¨‹åºä¸Serverçš„ç½‘ç»œè¿æ¥ï¼ŒTCPè¿æ¥ã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Channel")]),t._v("ï¼šä¿¡é“ï¼Œæ¶ˆæ¯è¯»å†™ç­‰æ“ä½œåœ¨ä¿¡é“ä¸­è¿›è¡Œã€‚å®¢æˆ·ç«¯å¯ä»¥å»ºç«‹å¤šä¸ªä¿¡é“ï¼Œæ¯ä¸ªä¿¡é“ä»£è¡¨ä¸€ä¸ªä¼šè¯ä»»åŠ¡ã€‚å¦‚æœæ¯ä¸€æ¬¡è®¿é—® RabbitMQ éƒ½å»ºç«‹ä¸€ä¸ª Connectionï¼Œåœ¨æ¶ˆæ¯é‡å¤§çš„æ—¶å€™å»ºç«‹ TCP Connection çš„å¼€é”€å°†æ˜¯å·¨å¤§çš„ï¼Œæ•ˆç‡ä¹Ÿè¾ƒä½ã€‚Channel æ˜¯åœ¨ connection å†…éƒ¨å»ºç«‹çš„é€»è¾‘è¿æ¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºæ”¯æŒå¤šçº¿ç¨‹ï¼Œé€šå¸¸æ¯ä¸ª thread åˆ›å»ºå•ç‹¬çš„ channel è¿›è¡Œé€šè®¯ï¼ŒAMQP method åŒ…å«äº† channel id å¸®åŠ©å®¢æˆ·ç«¯å’Œ message broker è¯†åˆ« channelï¼Œæ‰€ä»¥ channel ä¹‹é—´æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚"),n("strong",[t._v("Channel ä½œä¸ºè½»é‡çº§çš„")])]),t._v(" "),n("p",[n("strong",[t._v("Connection")]),t._v(" "),n("strong",[t._v("æå¤§å‡å°‘äº†æ“ä½œç³»ç»Ÿå»ºç«‹")]),t._v(" "),n("strong",[t._v("TCP connection")]),t._v(" "),n("strong",[t._v("çš„å¼€é”€")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Message")]),t._v("ï¼šæ¶ˆæ¯ï¼Œåº”ç”¨ç¨‹åºå’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€çš„æ•°æ®ï¼Œæ¶ˆæ¯å¯ä»¥éå¸¸ç®€å•ï¼Œä¹Ÿå¯ä»¥å¾ˆå¤æ‚ã€‚ç”±Propertieså’ŒBodyç»„æˆã€‚Propertiesä¸ºå¤–åŒ…è£…ï¼Œå¯ä»¥å¯¹æ¶ˆæ¯è¿›è¡Œä¿®é¥°ï¼Œæ¯”å¦‚æ¶ˆæ¯çš„ä¼˜å…ˆçº§ã€å»¶è¿Ÿç­‰é«˜çº§ç‰¹æ€§ï¼›Bodyå°±æ˜¯æ¶ˆæ¯ä½“å†…å®¹ã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Virtual Host")]),t._v("ï¼šè™šæ‹Ÿä¸»æœºï¼Œç”¨äºé€»è¾‘éš”ç¦»ã€‚ä¸€ä¸ªè™šæ‹Ÿä¸»æœºé‡Œé¢å¯ä»¥æœ‰è‹¥å¹²ä¸ªExchangeå’ŒQueueï¼ŒåŒä¸€ä¸ªè™šæ‹Ÿä¸»æœºé‡Œé¢ä¸èƒ½æœ‰ç›¸åŒåç§°çš„Exchangeæˆ–Queueã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Exchange")]),t._v("ï¼šäº¤æ¢å™¨ï¼Œæ¥æ”¶æ¶ˆæ¯ï¼ŒæŒ‰ç…§è·¯ç”±è§„åˆ™å°†æ¶ˆæ¯è·¯ç”±åˆ°ä¸€ä¸ªæˆ–è€…å¤šä¸ªé˜Ÿåˆ—ã€‚å¦‚æœè·¯ç”±ä¸åˆ°ï¼Œæˆ–è€…è¿”å›ç»™ç”Ÿäº§è€…ï¼Œæˆ–è€…ç›´æ¥ä¸¢å¼ƒã€‚"),n("code",[t._v("RabbitMQ")]),t._v("å¸¸ç”¨çš„äº¤æ¢å™¨å¸¸ç”¨ç±»å‹æœ‰directã€topicã€fanoutã€headerså››ç§ï¼Œåé¢è¯¦ç»†ä»‹ç»ã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Binding")]),t._v("ï¼šç»‘å®šï¼Œäº¤æ¢å™¨å’Œæ¶ˆæ¯é˜Ÿåˆ—ä¹‹é—´çš„è™šæ‹Ÿè¿æ¥ï¼Œç»‘å®šä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ª"),n("code",[t._v("RoutingKey")]),t._v("ï¼ŒBinding ä¿¡æ¯è¢«ä¿å­˜åˆ° exchange ä¸­çš„æŸ¥è¯¢è¡¨ä¸­ï¼Œç”¨äº message çš„åˆ†å‘ä¾æ®")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("RoutingKey")]),t._v("ï¼šè·¯ç”±é”®ï¼Œç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€ç»™äº¤æ¢å™¨çš„æ—¶å€™ï¼Œä¼šå‘é€ä¸€ä¸ª"),n("code",[t._v("RoutingKey")]),t._v("ï¼Œç”¨æ¥æŒ‡å®šè·¯ç”±è§„åˆ™ï¼Œè¿™æ ·äº¤æ¢å™¨å°±çŸ¥é“æŠŠæ¶ˆæ¯å‘é€åˆ°å“ªä¸ªé˜Ÿåˆ—ã€‚è·¯ç”±é”®é€šå¸¸ä¸ºä¸€ä¸ªâ€œ.â€åˆ†å‰²çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚"),n("code",[t._v("â€œcom.rabbitmqâ€")]),t._v("ã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Queue")]),t._v("ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨æ¥ä¿å­˜æ¶ˆæ¯ï¼Œä¾›æ¶ˆè´¹è€…æ¶ˆè´¹ã€‚")])])]),t._v(" "),n("h2",{attrs:{id:"_3ã€rabbitmqå·¥ä½œåŸç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€rabbitmqå·¥ä½œåŸç†"}},[t._v("#")]),t._v(" 3ã€RabbitMQå·¥ä½œåŸç†")]),t._v(" "),n("p",[t._v("ä¸å¾—ä¸çœ‹ä¸€ä¸‹ç»å…¸çš„å›¾äº†ï¼Œå¦‚ä¸‹ğŸ‘‡")]),t._v(" "),n("p",[n("img",{attrs:{src:s(490),alt:"image-20220708092548210"}})]),t._v(" "),n("p",[t._v("AMQP åè®®æ¨¡å‹ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šç”Ÿäº§è€…ã€æ¶ˆè´¹è€…å’ŒæœåŠ¡ç«¯ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("ç”Ÿäº§è€…æ˜¯è¿æ¥åˆ° Serverï¼Œå»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œå¼€å¯ä¸€ä¸ªä¿¡é“ã€‚")]),t._v(" "),n("li",[t._v("ç”Ÿäº§è€…å£°æ˜äº¤æ¢å™¨å’Œé˜Ÿåˆ—ï¼Œè®¾ç½®ç›¸å…³å±æ€§ï¼Œå¹¶é€šè¿‡è·¯ç”±é”®å°†äº¤æ¢å™¨å’Œé˜Ÿåˆ—è¿›è¡Œç»‘å®šã€‚")]),t._v(" "),n("li",[t._v("æ¶ˆè´¹è€…ä¹Ÿéœ€è¦è¿›è¡Œå»ºç«‹è¿æ¥ï¼Œå¼€å¯ä¿¡é“ç­‰æ“ä½œï¼Œä¾¿äºæ¥æ”¶æ¶ˆæ¯ã€‚")]),t._v(" "),n("li",[t._v("ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼Œå‘é€åˆ°æœåŠ¡ç«¯ä¸­çš„è™šæ‹Ÿä¸»æœºã€‚")]),t._v(" "),n("li",[t._v("è™šæ‹Ÿä¸»æœºä¸­çš„äº¤æ¢å™¨æ ¹æ®è·¯ç”±é”®é€‰æ‹©è·¯ç”±è§„åˆ™ï¼Œå‘é€åˆ°ä¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚")]),t._v(" "),n("li",[t._v("è®¢é˜…äº†æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹è€…å°±å¯ä»¥è·å–åˆ°æ¶ˆæ¯ï¼Œè¿›è¡Œæ¶ˆè´¹ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_4ã€rabbitmq-ä¸Šçš„ä¸€ä¸ª-queue-ä¸­å­˜æ”¾çš„-message-æ˜¯å¦æœ‰æ•°é‡é™åˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€rabbitmq-ä¸Šçš„ä¸€ä¸ª-queue-ä¸­å­˜æ”¾çš„-message-æ˜¯å¦æœ‰æ•°é‡é™åˆ¶"}},[t._v("#")]),t._v(" 4ã€RabbitMQ ä¸Šçš„ä¸€ä¸ª queue ä¸­å­˜æ”¾çš„ message æ˜¯å¦æœ‰æ•°é‡é™åˆ¶ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("å¯ä»¥è®¤ä¸ºæ˜¯æ— é™åˆ¶ï¼Œå› ä¸ºé™åˆ¶å–å†³äºæœºå™¨çš„å†…å­˜ï¼Œä½†æ˜¯æ¶ˆæ¯è¿‡å¤šä¼šå¯¼è‡´å¤„ç†æ•ˆç‡çš„ä¸‹é™ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_5ã€rabbitmq-å…è®¸å‘é€çš„-message-æœ€å¤§å¯è¾¾å¤šå¤§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5ã€rabbitmq-å…è®¸å‘é€çš„-message-æœ€å¤§å¯è¾¾å¤šå¤§"}},[t._v("#")]),t._v(" 5ã€RabbitMQ å…è®¸å‘é€çš„ message æœ€å¤§å¯è¾¾å¤šå¤§ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("æ ¹æ® AMQP åè®®è§„å®šï¼Œæ¶ˆæ¯ä½“çš„å¤§å°ç”± 64-bit çš„å€¼æ¥æŒ‡å®šï¼Œæ‰€ä»¥ä½ å°±å¯ä»¥çŸ¥é“åˆ°åº•èƒ½å‘å¤šå¤§çš„æ•°æ®äº†")])]),t._v(" "),n("h2",{attrs:{id:"_6ã€rabbitmqçš„å·¥ä½œæ¨¡å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6ã€rabbitmqçš„å·¥ä½œæ¨¡å¼"}},[t._v("#")]),t._v(" 6ã€RabbitMQçš„å·¥ä½œæ¨¡å¼")]),t._v(" "),n("h3",{attrs:{id:"_1ã€simpleæ¨¡å¼-å³æœ€ç®€å•çš„æ”¶å‘æ¨¡å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€simpleæ¨¡å¼-å³æœ€ç®€å•çš„æ”¶å‘æ¨¡å¼"}},[t._v("#")]),t._v(" 1ã€simpleæ¨¡å¼ï¼ˆå³æœ€ç®€å•çš„æ”¶å‘æ¨¡å¼ï¼‰")]),t._v(" "),n("p",[n("img",{attrs:{src:s(491),alt:"image-20220807220356530"}})]),t._v(" "),n("ol",[n("li",[t._v("æ¶ˆæ¯äº§ç”Ÿæ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯æ”¾å…¥é˜Ÿåˆ—")]),t._v(" "),n("li",[t._v("æ¶ˆæ¯çš„æ¶ˆè´¹è€…(consumer) ç›‘å¬ æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­æœ‰æ¶ˆæ¯ï¼Œå°±æ¶ˆè´¹æ‰ï¼Œæ¶ˆæ¯è¢«æ‹¿èµ°åï¼Œè‡ªåŠ¨ä»é˜Ÿåˆ—ä¸­åˆ é™¤(éšæ‚£ æ¶ˆæ¯å¯èƒ½æ²¡æœ‰è¢«æ¶ˆè´¹è€…æ­£ç¡®å¤„ç†ï¼Œå·²ç»ä»é˜Ÿåˆ—ä¸­æ¶ˆå¤±äº†ï¼Œé€ æˆæ¶ˆæ¯çš„ä¸¢å¤±ï¼Œè¿™é‡Œå¯ä»¥è®¾ç½®æˆæ‰‹åŠ¨çš„ackï¼Œä½†å¦‚æœè®¾ç½®æˆæ‰‹åŠ¨ackï¼Œå¤„ç†å®Œåè¦åŠæ—¶å‘é€ackæ¶ˆæ¯ç»™é˜Ÿåˆ—ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æº¢å‡º)ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"_2ã€work-queues-å·¥ä½œé˜Ÿåˆ—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€work-queues-å·¥ä½œé˜Ÿåˆ—"}},[t._v("#")]),t._v(" 2ã€Work Queues(å·¥ä½œé˜Ÿåˆ—)")]),t._v(" "),n("p",[n("img",{attrs:{src:s(492),alt:"image-20220816230638693"}})]),t._v(" "),n("p",[t._v("æ¶ˆæ¯äº§ç”Ÿè€…å°†æ¶ˆæ¯æ”¾å…¥é˜Ÿåˆ—æ¶ˆè´¹è€…å¯ä»¥æœ‰å¤šä¸ª,æ¶ˆè´¹è€…1,æ¶ˆè´¹è€…2åŒæ—¶ç›‘å¬åŒä¸€ä¸ªé˜Ÿåˆ—,æ¶ˆæ¯è¢«æ¶ˆè´¹ã€‚C1 C2å…±åŒäº‰æŠ¢å½“å‰çš„æ¶ˆæ¯é˜Ÿåˆ—å†…å®¹,è°å…ˆæ‹¿åˆ°è°è´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯(éšæ‚£ï¼šé«˜å¹¶å‘æƒ…å†µä¸‹,é»˜è®¤ä¼šäº§ç”ŸæŸä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…å…±åŒä½¿ç”¨,å¯ä»¥è®¾ç½®ä¸€ä¸ªå¼€å…³(syncronize) ä¿è¯ä¸€æ¡æ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…ä½¿ç”¨)ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_3ã€publish-subscribeå‘å¸ƒè®¢é˜…-å…±äº«èµ„æº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€publish-subscribeå‘å¸ƒè®¢é˜…-å…±äº«èµ„æº"}},[t._v("#")]),t._v(" 3ã€publish/subscribeå‘å¸ƒè®¢é˜…(å…±äº«èµ„æº)")]),t._v(" "),n("p",[n("img",{attrs:{src:s(493),alt:"image-20220816230733324"}})]),t._v(" "),n("ol",[n("li",[t._v("æ¯ä¸ªæ¶ˆè´¹è€…ç›‘å¬è‡ªå·±çš„é˜Ÿåˆ—ï¼›")]),t._v(" "),n("li",[t._v("ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘ç»™brokerï¼Œç”±äº¤æ¢æœºå°†æ¶ˆæ¯è½¬å‘åˆ°ç»‘å®šæ­¤äº¤æ¢æœºçš„æ¯ä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªç»‘å®šäº¤æ¢æœºçš„é˜Ÿåˆ—éƒ½å°†æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"_4ã€routingè·¯ç”±æ¨¡å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€routingè·¯ç”±æ¨¡å¼"}},[t._v("#")]),t._v(" 4ã€routingè·¯ç”±æ¨¡å¼")]),t._v(" "),n("p",[n("img",{attrs:{src:s(494),alt:"image-20220816230820807"}})]),t._v(" "),n("ol",[n("li",[t._v("æ¶ˆæ¯ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€ç»™äº¤æ¢æœºæŒ‰ç…§è·¯ç”±åˆ¤æ–­ï¼Œè·¯ç”±æ˜¯å­—ç¬¦ä¸²(info) å½“å‰äº§ç”Ÿçš„æ¶ˆæ¯æºå¸¦è·¯ç”±å­—ç¬¦(å¯¹è±¡çš„æ–¹æ³•)ï¼Œäº¤æ¢æœºæ ¹æ®è·¯ç”±çš„keyï¼Œåªèƒ½åŒ¹é…ä¸Šè·¯ç”±keyå¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯¹åº”çš„æ¶ˆè´¹è€…æ‰èƒ½æ¶ˆè´¹æ¶ˆæ¯;")]),t._v(" "),n("li",[t._v("æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å®šä¹‰è·¯ç”±å­—ç¬¦ä¸²")]),t._v(" "),n("li",[t._v("ä»ç³»ç»Ÿçš„ä»£ç é€»è¾‘ä¸­è·å–å¯¹åº”çš„åŠŸèƒ½å­—ç¬¦ä¸²,å°†æ¶ˆæ¯ä»»åŠ¡æ‰”åˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸­ã€‚")]),t._v(" "),n("li",[t._v("ä¸šåŠ¡åœºæ™¯:error é€šçŸ¥;EXCEPTION;é”™è¯¯é€šçŸ¥çš„åŠŸèƒ½;ä¼ ç»Ÿæ„ä¹‰çš„é”™è¯¯é€šçŸ¥;å®¢æˆ·é€šçŸ¥;åˆ©ç”¨keyè·¯ç”±,å¯ä»¥å°†ç¨‹åºä¸­çš„é”™è¯¯å°è£…æˆæ¶ˆæ¯ä¼ å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­,å¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰æ¶ˆè´¹è€…,å®æ—¶æ¥æ”¶é”™è¯¯;")])]),t._v(" "),n("h3",{attrs:{id:"_5ã€topic-ä¸»é¢˜æ¨¡å¼-è·¯ç”±æ¨¡å¼çš„ä¸€ç§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5ã€topic-ä¸»é¢˜æ¨¡å¼-è·¯ç”±æ¨¡å¼çš„ä¸€ç§"}},[t._v("#")]),t._v(" 5ã€topic ä¸»é¢˜æ¨¡å¼(è·¯ç”±æ¨¡å¼çš„ä¸€ç§)")]),t._v(" "),n("p",[n("img",{attrs:{src:s(495),alt:"image-20220816230958075"}})]),t._v(" "),n("ol",[n("li",[t._v("æ˜Ÿå·äº•å·ä»£è¡¨é€šé…ç¬¦")]),t._v(" "),n("li",[t._v("æ˜Ÿå·ä»£è¡¨å¤šä¸ªå•è¯,äº•å·ä»£è¡¨ä¸€ä¸ªå•è¯")]),t._v(" "),n("li",[t._v("è·¯ç”±åŠŸèƒ½æ·»åŠ æ¨¡ç³ŠåŒ¹é…")]),t._v(" "),n("li",[t._v("æ¶ˆæ¯äº§ç”Ÿè€…äº§ç”Ÿæ¶ˆæ¯,æŠŠæ¶ˆæ¯äº¤ç»™äº¤æ¢æœº")]),t._v(" "),n("li",[t._v("äº¤æ¢æœºæ ¹æ®keyçš„è§„åˆ™æ¨¡ç³ŠåŒ¹é…åˆ°å¯¹åº”çš„é˜Ÿåˆ—,ç”±é˜Ÿåˆ—çš„ç›‘å¬æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯æ¶ˆè´¹")])]),t._v(" "),n("p",[t._v("PSï¼šï¼ˆåœ¨æˆ‘çš„ç†è§£çœ‹æ¥å°±æ˜¯routingæŸ¥è¯¢çš„ä¸€ç§æ¨¡ç³ŠåŒ¹é…ï¼Œå°±ç±»ä¼¼sqlçš„æ¨¡ç³ŠæŸ¥è¯¢æ–¹å¼ï¼‰")]),t._v(" "),n("h2",{attrs:{id:"_7ã€å¦‚ä½•ä¿è¯rabbitmqæ¶ˆæ¯çš„é¡ºåºæ€§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7ã€å¦‚ä½•ä¿è¯rabbitmqæ¶ˆæ¯çš„é¡ºåºæ€§"}},[t._v("#")]),t._v(" 7ã€å¦‚ä½•ä¿è¯RabbitMQæ¶ˆæ¯çš„é¡ºåºæ€§ï¼Ÿ")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("æ‹†åˆ†å¤šä¸ª queue(æ¶ˆæ¯é˜Ÿåˆ—)ï¼Œæ¯ä¸ª queue(æ¶ˆæ¯é˜Ÿåˆ—) ä¸€ä¸ª consumer(æ¶ˆè´¹è€…)ï¼Œå°±æ˜¯å¤šä¸€äº› queue(æ¶ˆæ¯é˜Ÿåˆ—)è€Œå·²ï¼Œç¡®å®æ˜¯éº»çƒ¦ç‚¹ï¼›")]),t._v(" "),n("li",[t._v("æˆ–è€…å°±ä¸€ä¸ª queue (æ¶ˆæ¯é˜Ÿåˆ—)ä½†æ˜¯å¯¹åº”ä¸€ä¸ª consumer(æ¶ˆè´¹è€…)ï¼Œç„¶åè¿™ä¸ª consumer(æ¶ˆè´¹è€…)å†…éƒ¨ç”¨å†…å­˜é˜Ÿåˆ—åšæ’é˜Ÿï¼Œç„¶ååˆ†å‘ç»™åº•å±‚ä¸åŒçš„ worker æ¥å¤„ç†ã€‚")])])]),t._v(" "),n("h2",{attrs:{id:"_8ã€rabbitmqæ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µæœ‰å“ªäº›"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8ã€rabbitmqæ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µæœ‰å“ªäº›"}},[t._v("#")]),t._v(" 8ã€RabbitMQæ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µæœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),n("blockquote",[n("ol",[n("li",[t._v("ç”Ÿäº§è€…å‘é€æ¶ˆæ¯RabbitMQ Server æ¶ˆæ¯ä¸¢å¤±")]),t._v(" "),n("li",[t._v("RabbitMQ Serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±")]),t._v(" "),n("li",[t._v("RabbitMQ Serverä¸­å­˜å‚¨çš„æ¶ˆæ¯åˆ†å‘ç»™æ¶ˆè´¹è€…è€…ä¸¢å¤±")])])]),t._v(" "),n("h3",{attrs:{id:"_1ã€ç”Ÿäº§è€…å‘é€æ¶ˆæ¯rabbitmq-server-æ¶ˆæ¯ä¸¢å¤±"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€ç”Ÿäº§è€…å‘é€æ¶ˆæ¯rabbitmq-server-æ¶ˆæ¯ä¸¢å¤±"}},[t._v("#")]),t._v(" 1ã€ç”Ÿäº§è€…å‘é€æ¶ˆæ¯RabbitMQ Server æ¶ˆæ¯ä¸¢å¤±")]),t._v(" "),n("blockquote",[n("ol",[n("li",[t._v("å‘é€è¿‡ç¨‹ä¸­å­˜åœ¨ç½‘ç»œé—®é¢˜ï¼Œå¯¼è‡´æ¶ˆæ¯æ²¡æœ‰å‘é€æˆåŠŸ")]),t._v(" "),n("li",[t._v("ä»£ç é—®é¢˜ï¼Œå¯¼è‡´æ¶ˆæ¯æ²¡å‘é€")])])]),t._v(" "),n("h3",{attrs:{id:"_2ã€rabbitmq-serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€rabbitmq-serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±"}},[t._v("#")]),t._v(" 2ã€RabbitMQ Serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±")]),t._v(" "),n("blockquote",[n("ol",[n("li",[t._v("æ¶ˆæ¯æ²¡æœ‰æŒä¹…åŒ–ï¼ŒæœåŠ¡å™¨é‡å¯å¯¼è‡´å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±")])])]),t._v(" "),n("h3",{attrs:{id:"_3ã€rabbitmq-serveråˆ°æ¶ˆè´¹è€…æ¶ˆæ¯ä¸¢å¤±"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€rabbitmq-serveråˆ°æ¶ˆè´¹è€…æ¶ˆæ¯ä¸¢å¤±"}},[t._v("#")]),t._v(" 3ã€RabbitMQ Serveråˆ°æ¶ˆè´¹è€…æ¶ˆæ¯ä¸¢å¤±")]),t._v(" "),n("blockquote",[n("ol",[n("li",[t._v("æ¶ˆè´¹ç«¯æ¥æ”¶åˆ°ç›¸å…³æ¶ˆæ¯ä¹‹åï¼Œæ¶ˆè´¹ç«¯è¿˜æ²¡æ¥å¾—åŠå¤„ç†æ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯æœºå™¨å°±å®•æœºäº†")]),t._v(" "),n("li",[t._v("å¤„ç†æ¶ˆæ¯å­˜åœ¨å¼‚å¸¸")])])]),t._v(" "),n("h2",{attrs:{id:"_9ã€rabbitmqå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9ã€rabbitmqå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±"}},[t._v("#")]),t._v(" 9ã€RabbitMQå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("é’ˆå¯¹ä¸Šé¢çš„æƒ…å†µï¼Œç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±")]),t._v(" "),n("p",[t._v("ç”Ÿäº§è€…å‘é€æ¶ˆæ¯RabbitMQ Server æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å¸¸ç”¨è§£å†³æ–¹æ¡ˆï¼šå‘é€æ–¹ç¡®è®¤æœºåˆ¶ï¼ˆpublisher confirmï¼‰")]),t._v(" "),n("li",[t._v("å¼€å¯AMQPçš„äº‹åŠ¡å¤„ç†ï¼ˆä¸æ¨èï¼‰")])]),t._v(" "),n("p",[t._v("RabbitMQ Serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ¶ˆæ¯å›é€€ï¼šé€šè¿‡è®¾ç½® mandatory å‚æ•°å¯ä»¥åœ¨å½“æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ä¸å¯è¾¾ç›®çš„åœ°æ—¶å°†æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…")]),t._v(" "),n("li",[t._v("è®¾ç½®æŒä¹…åŒ–ï¼šä¿è¯é‡å¯è¿‡ç¨‹ä¸­ï¼Œäº¤æ¢æœºå’Œé˜Ÿåˆ—ä¹Ÿæ˜¯æŒä¹…åŒ–çš„")])]),t._v(" "),n("p",[t._v("RabbitMQ Serveråˆ°æ¶ˆè´¹è€…æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ‰‹åŠ¨ackç¡®è®¤æœºåˆ¶")])])]),t._v(" "),n("h3",{attrs:{id:"_1ã€ç”Ÿäº§è€…å‘é€æ¶ˆæ¯rabbitmq-server-æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€ç”Ÿäº§è€…å‘é€æ¶ˆæ¯rabbitmq-server-æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 1ã€ç”Ÿäº§è€…å‘é€æ¶ˆæ¯RabbitMQ Server æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("h4",{attrs:{id:"_1ã€å‘å¸ƒç¡®è®¤æœºåˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€å‘å¸ƒç¡®è®¤æœºåˆ¶"}},[t._v("#")]),t._v(" 1ã€å‘å¸ƒç¡®è®¤æœºåˆ¶")]),t._v(" "),n("blockquote",[n("p",[t._v("ç”Ÿäº§è€…å°†ä¿¡é“è®¾ç½®æˆ confirm æ¨¡å¼ï¼Œä¸€æ—¦ä¿¡é“è¿›å…¥ confirm æ¨¡å¼ï¼Œæ‰€æœ‰åœ¨è¯¥ä¿¡é“ä¸Šé¢å‘å¸ƒçš„æ¶ˆæ¯éƒ½å°†ä¼šè¢«æŒ‡æ´¾ä¸€ä¸ªå”¯ä¸€çš„ ID(ä» 1 å¼€å§‹)ï¼Œä¸€æ—¦æ¶ˆæ¯è¢«æŠ•é€’åˆ°æ‰€æœ‰åŒ¹é…çš„é˜Ÿåˆ—ä¹‹åï¼Œbrokerå°±ä¼šå‘é€ä¸€ä¸ªç¡®è®¤ç»™ç”Ÿäº§è€…(åŒ…å«æ¶ˆæ¯çš„å”¯ä¸€ ID)ï¼Œè¿™å°±ä½¿å¾—ç”Ÿäº§è€…çŸ¥é“æ¶ˆæ¯å·²ç»æ­£ç¡®åˆ°è¾¾ç›®çš„é˜Ÿåˆ—äº†ï¼Œå¦‚æœæ¶ˆæ¯å’Œé˜Ÿåˆ—æ˜¯å¯æŒä¹…åŒ–çš„ï¼Œé‚£ä¹ˆç¡®è®¤æ¶ˆæ¯ä¼šåœ¨å°†æ¶ˆæ¯å†™å…¥ç£ç›˜ä¹‹åå‘å‡ºï¼Œbroker å›ä¼ ç»™ç”Ÿäº§è€…çš„ç¡®è®¤æ¶ˆæ¯ä¸­ delivery-tag åŸŸåŒ…å«äº†ç¡®è®¤æ¶ˆæ¯çš„åºåˆ—å·ï¼Œæ­¤å¤– broker ä¹Ÿå¯ä»¥è®¾ç½®"),n("code",[t._v("basic.ack")]),t._v(" çš„ multiple åŸŸï¼Œè¡¨ç¤ºåˆ°è¿™ä¸ªåºåˆ—å·ä¹‹å‰çš„æ‰€æœ‰æ¶ˆæ¯éƒ½å·²ç»å¾—åˆ°äº†å¤„ç†ã€‚\nconfirm æ¨¡å¼æœ€å¤§çš„å¥½å¤„åœ¨äºå®ƒæ˜¯å¼‚æ­¥çš„ï¼Œä¸€æ—¦å‘å¸ƒä¸€æ¡æ¶ˆæ¯ï¼Œç”Ÿäº§è€…åº”ç”¨ç¨‹åºå°±å¯ä»¥åœ¨ç­‰ä¿¡é“è¿”å›ç¡®è®¤çš„åŒæ—¶ç»§ç»­å‘é€ä¸‹ä¸€æ¡æ¶ˆæ¯ï¼Œå½“æ¶ˆæ¯æœ€ç»ˆå¾—åˆ°ç¡®è®¤ä¹‹åï¼Œç”Ÿäº§è€…åº”ç”¨ä¾¿å¯ä»¥é€šè¿‡å›è°ƒæ–¹æ³•æ¥å¤„ç†è¯¥ç¡®è®¤æ¶ˆæ¯ï¼Œå¦‚æœ RabbitMQ å› ä¸ºè‡ªèº«å†…éƒ¨é”™è¯¯å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œå°±ä¼šå‘é€ä¸€æ¡ nack æ¶ˆæ¯ï¼Œç”Ÿäº§è€…åº”ç”¨ç¨‹åºåŒæ ·å¯ä»¥åœ¨å›è°ƒæ–¹æ³•ä¸­å¤„ç†è¯¥ nack æ¶ˆæ¯ã€‚")]),t._v(" "),n("p",[t._v("å‘å¸ƒç¡®è®¤åˆ†ä¸ºä¸‰ç§ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[n("strong",[t._v("å•ç‹¬å‘å¸ƒç¡®è®¤")]),t._v("ï¼šè¿™æ˜¯ä¸€ç§ç®€å•çš„ç¡®è®¤æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ç§"),n("strong",[t._v("åŒæ­¥ç¡®è®¤å‘å¸ƒ")]),t._v("çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å‘å¸ƒä¸€ä¸ªæ¶ˆæ¯ä¹‹ååªæœ‰å®ƒè¢«ç¡®è®¤å‘å¸ƒï¼Œåç»­çš„æ¶ˆæ¯æ‰èƒ½ç»§ç»­å‘å¸ƒï¼Œ"),n("code",[t._v("waitForConfirmsOrDie(long)")]),t._v("è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨æ¶ˆæ¯è¢«ç¡®è®¤çš„æ—¶å€™æ‰è¿”å›ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…è¿™ä¸ªæ¶ˆæ¯æ²¡æœ‰è¢«ç¡®è®¤é‚£ä¹ˆå®ƒå°†æŠ›å‡ºå¼‚å¸¸ã€‚")]),t._v(" "),n("p",[t._v("è¿™ç§ç¡®è®¤æ–¹å¼æœ‰ä¸€ä¸ªæœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯ï¼š**å‘å¸ƒé€Ÿåº¦ç‰¹åˆ«çš„æ…¢ï¼Œ**å› ä¸ºå¦‚æœæ²¡æœ‰ç¡®è®¤å‘å¸ƒçš„æ¶ˆæ¯å°±ä¼šé˜»å¡æ‰€æœ‰åç»­æ¶ˆæ¯çš„å‘å¸ƒï¼Œè¿™ç§æ–¹å¼æœ€å¤šæä¾›æ¯ç§’ä¸è¶…è¿‡æ•°ç™¾æ¡å‘å¸ƒæ¶ˆæ¯çš„ååé‡ã€‚å½“ç„¶å¯¹äºæŸäº›åº”ç”¨ç¨‹åºæ¥è¯´è¿™å¯èƒ½å·²ç»è¶³å¤Ÿäº†ã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("æ‰¹é‡å‘å¸ƒç¡®è®¤")]),t._v("ï¼šä¸Šé¢é‚£ç§æ–¹å¼éå¸¸æ…¢ï¼Œä¸å•ä¸ªç­‰å¾…ç¡®è®¤æ¶ˆæ¯ç›¸æ¯”ï¼Œå…ˆå‘å¸ƒä¸€æ‰¹æ¶ˆæ¯ç„¶åä¸€èµ·ç¡®è®¤å¯ä»¥æå¤§åœ°æé«˜ååé‡ï¼Œå½“ç„¶è¿™ç§æ–¹å¼çš„ç¼ºç‚¹å°±æ˜¯:"),n("strong",[t._v("å½“å‘ç”Ÿæ•…éšœå¯¼è‡´å‘å¸ƒå‡ºç°é—®é¢˜æ—¶ï¼Œä¸çŸ¥é“æ˜¯å“ªä¸ªæ¶ˆæ¯å‡ºç°é—®é¢˜äº†ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ•´ä¸ªæ‰¹å¤„ç†ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä»¥è®°å½•é‡è¦çš„ä¿¡æ¯è€Œåé‡æ–°å‘å¸ƒæ¶ˆæ¯")]),t._v("ã€‚å½“ç„¶è¿™ç§æ–¹æ¡ˆä»ç„¶æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿä¸€æ ·é˜»å¡æ¶ˆæ¯çš„å‘å¸ƒã€‚")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("å¼‚æ­¥å‘å¸ƒç¡®è®¤")]),t._v("ï¼šå¼‚æ­¥ç¡®è®¤è™½ç„¶ç¼–ç¨‹é€»è¾‘æ¯”ä¸Šä¸¤ä¸ªè¦å¤æ‚ï¼Œä½†æ˜¯æ€§ä»·æ¯”æœ€é«˜ï¼Œæ— è®ºæ˜¯å¯é æ€§è¿˜æ˜¯æ•ˆç‡éƒ½æ²¡å¾—è¯´ï¼Œä»–æ˜¯åˆ©ç”¨å›è°ƒå‡½æ•°æ¥è¾¾åˆ°æ¶ˆæ¯å¯é æ€§ä¼ é€’çš„ï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¹Ÿæ˜¯é€šè¿‡å‡½æ•°å›è°ƒæ¥ä¿è¯æ˜¯å¦æŠ•é€’æˆåŠŸ")])])])]),t._v(" "),n("h4",{attrs:{id:"_2ã€å¼€å¯amqpçš„äº‹åŠ¡å¤„ç†-ä¸æ¨è"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€å¼€å¯amqpçš„äº‹åŠ¡å¤„ç†-ä¸æ¨è"}},[t._v("#")]),t._v(" 2ã€å¼€å¯AMQPçš„äº‹åŠ¡å¤„ç†ï¼ˆä¸æ¨èï¼‰")]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸ºä»€ä¹ˆä¸æ¨èå‘¢ï¼Œå› ä¸ºå®ƒæ˜¯åŒæ­¥çš„ï¼Œä¸€æ¡æ¶ˆæ¯å‘é€ä¹‹åä¼šä½¿å‘é€ç«¯é˜»å¡ï¼Œä»¥ç­‰å¾…RabbitMQ Serverçš„å›åº”ï¼Œä¹‹åæ‰èƒ½ç»§ç»­å‘é€ä¸‹ä¸€æ¡æ¶ˆæ¯ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯çš„ååé‡å’Œæ€§èƒ½éƒ½ä¼šå¤§å¤§é™ä½ï¼Œè¿™å°±è·Ÿå•ç‹¬å‘å¸ƒç¡®è®¤ä¸€æ ·ã€‚")]),t._v(" "),n("p",[t._v("å¦‚ä½•ä½¿ç”¨ï¼šåœ¨ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œé€šè¿‡channel.txSelectå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œæ¥ç€å‘é€æ¶ˆæ¯ï¼Œ å¦‚æœæ¶ˆæ¯æŠ•é€’serverå¤±è´¥ï¼Œè¿›è¡Œäº‹åŠ¡å›æ»šchannel.txRollbackï¼Œç„¶åé‡æ–°å‘é€ï¼Œ å¦‚æœserveræ”¶åˆ°æ¶ˆæ¯ï¼Œå°±æäº¤äº‹åŠ¡channel.txCommit")])]),t._v(" "),n("h3",{attrs:{id:"_2ã€rabbitmq-serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€rabbitmq-serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 2ã€RabbitMQ Serverä¸­å­˜å‚¨çš„æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("blockquote",[n("p",[t._v("ç¬¬ä¸€ç§ä¿è¯æ¶ˆæ¯ä¸¢å¤±ï¼Œåªèƒ½å¤Ÿä¿è¯å‘é€æ–¹å‘é€æ¶ˆæ¯æˆåŠŸåˆ°è¾¾äº¤æ¢æœºï¼Œè‹¥æ­¤æ—¶æœåŠ¡å™¨å­˜åœ¨é—®é¢˜æˆ–è€…ç»‘å®šçš„routingKeyä¸æ­£ç¡®ï¼Œå¯¼è‡´æ¶ˆæ¯å‘é€å¤±è´¥ï¼Œé‚£ä¹ˆæ¶ˆæ¯æœ€ç»ˆä¹Ÿä¼šä¸¢å¤±ã€‚")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("é‡‡ç”¨æ¶ˆæ¯å›é€€ï¼šé€šè¿‡è®¾ç½® mandatory å‚æ•°å¯ä»¥åœ¨å½“æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ä¸å¯è¾¾ç›®çš„åœ°æ—¶å°†æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…")])]),t._v(" "),n("li",[t._v("è®¾ç½®æŒä¹…åŒ–")])])]),t._v(" "),n("h4",{attrs:{id:"_1ã€æ¶ˆæ¯å›é€€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€æ¶ˆæ¯å›é€€"}},[t._v("#")]),t._v(" 1ã€æ¶ˆæ¯å›é€€")]),t._v(" "),n("p",[t._v("æºç ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("mandatoryå‚æ•°\ntrue:äº¤æ¢æœºæ— æ³•å°†æ¶ˆæ¯è¿›è¡Œè·¯ç”±æ—¶ï¼Œä¼šå°†è¯¥æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…\nfalseï¼šå¦‚æœå‘ç°æ¶ˆæ¯æ— æ³•è¿›è¡Œè·¯ç”±ï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒ\n")])])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("basicPublish")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" exchange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" routingKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" mandatory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BasicProperties")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delegate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("basicPublish")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exchange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" routingKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mandatory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("æœ‰äº† mandatory å‚æ•°å’Œå›é€€æ¶ˆæ¯ï¼Œæˆ‘ä»¬è·å¾—äº†å¯¹æ— æ³•æŠ•é€’æ¶ˆæ¯çš„æ„ŸçŸ¥èƒ½åŠ›ï¼Œæœ‰æœºä¼šåœ¨ç”Ÿäº§è€…çš„æ¶ˆæ¯æ— æ³•è¢«æŠ•é€’æ—¶å‘ç°å¹¶å¤„ç†ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“è¯¥å¦‚ä½•å¤„ç†è¿™äº›æ— æ³•è·¯ç”±çš„æ¶ˆæ¯ï¼Œæœ€å¤šæ‰“ä¸ªæ—¥å¿—ï¼Œç„¶åè§¦å‘æŠ¥è­¦ï¼Œå†æ¥æ‰‹åŠ¨å¤„ç†ã€‚è€Œé€šè¿‡æ—¥å¿—æ¥å¤„ç†è¿™äº›æ— æ³•è·¯ç”±çš„æ¶ˆæ¯æ˜¯å¾ˆä¸ä¼˜é›…çš„åšæ³•ï¼Œç‰¹åˆ«æ˜¯å½“ç”Ÿäº§è€…æ‰€åœ¨çš„æœåŠ¡æœ‰å¤šå°æœºå™¨çš„æ—¶å€™ï¼Œæ‰‹åŠ¨å¤åˆ¶æ—¥å¿—ä¼šæ›´åŠ éº»çƒ¦è€Œä¸”å®¹æ˜“å‡ºé”™ã€‚")]),t._v(" "),n("p",[t._v("è¿™æ—¶éœ€è¦é‡‡ç”¨"),n("strong",[t._v("å¤‡ä»½äº¤æ¢æœº")]),t._v("äº†")]),t._v(" "),n("p",[t._v("å¤‡ä»½äº¤æ¢æœºå¯ä»¥ç†è§£ä¸º RabbitMQ ä¸­äº¤æ¢æœºçš„â€œå¤‡èƒâ€ï¼Œå½“æˆ‘ä»¬ä¸ºæŸä¸€ä¸ªäº¤æ¢æœºå£°æ˜ä¸€ä¸ªå¯¹åº”çš„å¤‡ä»½äº¤æ¢æœºæ—¶ï¼Œ")]),t._v(" "),n("blockquote",[n("p",[t._v("å°±æ˜¯ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªå¤‡èƒï¼Œå½“äº¤æ¢æœºæ¥æ”¶åˆ°ä¸€æ¡ä¸å¯è·¯ç”±æ¶ˆæ¯æ—¶ï¼Œå°†ä¼šæŠŠè¿™æ¡æ¶ˆæ¯è½¬å‘åˆ°å¤‡ä»½äº¤æ¢æœºä¸­ï¼Œç”±å¤‡ä»½äº¤æ¢æœºæ¥è¿›è¡Œè½¬å‘å’Œå¤„ç†ï¼Œé€šå¸¸å¤‡ä»½äº¤æ¢æœºçš„ç±»å‹ä¸º Fanout ï¼Œè¿™æ ·å°±èƒ½æŠŠæ‰€æœ‰æ¶ˆæ¯éƒ½æŠ•é€’åˆ°ä¸å…¶ç»‘å®šçš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åæˆ‘ä»¬åœ¨å¤‡ä»½äº¤æ¢æœºä¸‹ç»‘å®šä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿™æ ·æ‰€æœ‰é‚£äº›åŸäº¤æ¢æœºæ— æ³•è¢«è·¯ç”±çš„æ¶ˆæ¯ï¼Œå°±ä¼šéƒ½è¿›å…¥è¿™ä¸ªé˜Ÿåˆ—äº†ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å»ºç«‹ä¸€ä¸ªæŠ¥è­¦é˜Ÿåˆ—ï¼Œç”¨ç‹¬ç«‹çš„æ¶ˆè´¹è€…æ¥è¿›è¡Œç›‘æµ‹å’ŒæŠ¥è­¦ã€‚")])]),t._v(" "),n("p",[t._v("å…·ä½“ä»£ç è¯·å‚è€ƒè¿™ç¯‡ï¼š")]),t._v(" "),n("h4",{attrs:{id:"_2ã€è®¾ç½®æŒä¹…åŒ–"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€è®¾ç½®æŒä¹…åŒ–"}},[t._v("#")]),t._v(" 2ã€è®¾ç½®æŒä¹…åŒ–")]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸Šé¢æˆ‘ä»¬çš„è§’åº¦æ˜¯ç«™åœ¨ç”Ÿäº§è€…çš„æ–¹å‘ï¼Œä½†æ˜¯å¦‚æœæœåŠ¡å™¨é‡å¯äº†ï¼Œæ­¤æ—¶äº¤æ¢æœºå’Œé˜Ÿåˆ—éƒ½ä¸å­˜åœ¨äº†ï¼Œæ¶ˆæ¯å­˜åœ¨ä¹Ÿå‘é€ä¸äº†ï¼Œè¿™æ—¶éœ€è¦æŠŠäº¤æ¢æœºå’Œé˜Ÿåˆ—éƒ½æŒä¹…åŒ–ã€‚")])]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n* ç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—\n* 1.é˜Ÿåˆ—åç§°\n* 2.é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯æ˜¯å¦æŒä¹…åŒ– é»˜è®¤æ¶ˆæ¯å­˜å‚¨åœ¨å†…å­˜ä¸­\n* 3.è¯¥é˜Ÿåˆ—æ˜¯å¦åªä¾›ä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹ æ˜¯å¦è¿›è¡Œå…±äº« true å¯ä»¥å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹\n* 4.æ˜¯å¦è‡ªåŠ¨åˆ é™¤ æœ€åä¸€ä¸ªæ¶ˆè´¹è€…ç«¯å¼€è¿æ¥ä»¥å è¯¥é˜Ÿåˆ—æ˜¯å¦è‡ªåŠ¨åˆ é™¤ true è‡ªåŠ¨åˆ é™¤\n* 5.å…¶ä»–å‚æ•°\n*/")]),t._v("\nchannel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("queueDeclare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("QUEUE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("h3",{attrs:{id:"_3ã€rabbitmq-serveråˆ°æ¶ˆè´¹è€…æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€rabbitmq-serveråˆ°æ¶ˆè´¹è€…æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 3ã€RabbitMQ Serveråˆ°æ¶ˆè´¹è€…æ¶ˆæ¯ä¸¢å¤±è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("blockquote",[n("p",[t._v("é»˜è®¤æ¶ˆæ¯é‡‡ç”¨çš„æ˜¯è‡ªåŠ¨åº”ç­”ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³å®ç°æ¶ˆæ¯æ¶ˆè´¹è¿‡ç¨‹ä¸­ä¸ä¸¢å¤±ï¼Œéœ€è¦æŠŠè‡ªåŠ¨åº”ç­”æ”¹ä¸ºæ‰‹åŠ¨åº”ç­”")])]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°†è‡ªåŠ¨åº”ç­”å…³é—­")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" autoAck "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchannel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("basicConsume")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TASK_QUEUE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" autoAck"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deliverCallback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" consumerTag "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("h2",{attrs:{id:"_10ã€rabbitmqæ¶ˆæ¯åŸºäºä»€ä¹ˆä¼ è¾“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10ã€rabbitmqæ¶ˆæ¯åŸºäºä»€ä¹ˆä¼ è¾“"}},[t._v("#")]),t._v(" 10ã€RabbitMQæ¶ˆæ¯åŸºäºä»€ä¹ˆä¼ è¾“ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("ç”±äº TCP è¿æ¥çš„åˆ›å»ºå’Œé”€æ¯å¼€é”€è¾ƒå¤§ï¼Œä¸”å¹¶å‘æ•°å—ç³»ç»Ÿèµ„æºé™åˆ¶ï¼Œä¼šé€ æˆæ€§èƒ½ç“¶é¢ˆã€‚RabbitMQ ä½¿ç”¨"),n("strong",[t._v("ä¿¡é“")]),t._v("çš„æ–¹å¼æ¥ä¼ è¾“æ•°æ®ã€‚ä¿¡é“æ˜¯å»ºç«‹åœ¨çœŸå®çš„ TCP è¿æ¥å†…çš„è™šæ‹Ÿè¿æ¥ï¼Œä¸”æ¯æ¡ TCP è¿æ¥ä¸Šçš„ä¿¡é“æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_11ã€rabbitmqæ”¯æŒæ¶ˆæ¯çš„å¹‚ç­‰æ€§å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_11ã€rabbitmqæ”¯æŒæ¶ˆæ¯çš„å¹‚ç­‰æ€§å—"}},[t._v("#")]),t._v(" 11ã€RabbitMQæ”¯æŒæ¶ˆæ¯çš„å¹‚ç­‰æ€§å—ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("æ”¯æŒã€‚åœ¨æ¶ˆæ¯ç”Ÿäº§æ—¶ï¼ŒMQ å†…éƒ¨é’ˆå¯¹æ¯æ¡ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ç”Ÿæˆä¸€ä¸ª inner-msg-idï¼Œä½œä¸ºå»é‡çš„ä¾æ®ï¼ˆæ¶ˆæ¯æŠ•é€’å¤±è´¥å¹¶é‡ä¼ ï¼‰ï¼Œé¿å…é‡å¤çš„æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—ã€‚")]),t._v(" "),n("p",[t._v("åœ¨æ¶ˆæ¯æ¶ˆè´¹æ—¶ï¼Œè¦æ±‚æ¶ˆæ¯ä½“ä¸­å¿…é¡»è¦æœ‰ä¸€ä¸ª bizIdï¼ˆå¯¹äºåŒä¸€ä¸šåŠ¡å…¨å±€å”¯ä¸€ï¼Œå¦‚æ”¯ä»˜ IDã€è®¢å• IDã€å¸–å­ ID ç­‰ï¼‰ä½œä¸ºå»é‡çš„ä¾æ®ï¼Œé¿å…åŒä¸€æ¡æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_12ã€rabbitmqæ€ä¹ˆç¡®ä¿æ¶ˆæ¯å·²è¢«æ¶ˆè´¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12ã€rabbitmqæ€ä¹ˆç¡®ä¿æ¶ˆæ¯å·²è¢«æ¶ˆè´¹"}},[t._v("#")]),t._v(" 12ã€RabbitMQæ€ä¹ˆç¡®ä¿æ¶ˆæ¯å·²è¢«æ¶ˆè´¹ï¼Ÿ")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("æ¶ˆè´¹ç«¯é…ç½®æ‰‹åŠ¨ACKç¡®è®¤æœºåˆ¶")]),t._v(" "),n("li",[t._v("ç»“åˆæ•°æ®åº“è¿›è¡ŒçŠ¶æ€æ ‡è®°å¤„ç†")])])]),t._v(" "),n("h2",{attrs:{id:"_13ã€rabbitmqæ”¯æŒäº‹åŠ¡æ¶ˆæ¯å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_13ã€rabbitmqæ”¯æŒäº‹åŠ¡æ¶ˆæ¯å—"}},[t._v("#")]),t._v(" 13ã€RabbitMQæ”¯æŒäº‹åŠ¡æ¶ˆæ¯å—ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("æ”¯æŒäº‹åŠ¡æ¶ˆæ¯ã€‚å‰é¢åœ¨ç¬¬9é¢˜ä¸­ä¿è¯ç”Ÿäº§è€…ä¸ä¸¢å¤±æ¶ˆæ¯ï¼Œæåˆ°å¯ä»¥ä½¿ç”¨AMQPçš„äº‹åŠ¡ï¼Œä½†æ˜¯å®ƒæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥ä¸æ€ä¹ˆæ¨èä½¿ç”¨")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("äº‹åŠ¡çš„å®ç°ä¸»è¦æ˜¯å¯¹ä¿¡é“"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Channel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("çš„è®¾ç½®ï¼Œä¸»è¦æ–¹æ³•å¦‚ä¸‹ï¼š\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),t._v(" channel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("txSelect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  å£°æ˜å¯åŠ¨äº‹åŠ¡æ¨¡å¼\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v("channel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("txCommit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" æäº¤äº‹åŠ¡\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.")]),t._v("channel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("txRollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("å›æ»šäº‹åŠ¡\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])])]),t._v(" "),n("h2",{attrs:{id:"_14ã€rabbitmqæ¶ˆæ¯æŒä¹…åŒ–çš„æ¡ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_14ã€rabbitmqæ¶ˆæ¯æŒä¹…åŒ–çš„æ¡ä»¶"}},[t._v("#")]),t._v(" 14ã€RabbitMQæ¶ˆæ¯æŒä¹…åŒ–çš„æ¡ä»¶ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("æ¶ˆæ¯æŒä¹…åŒ–ï¼Œå½“ç„¶å‰ææ˜¯é˜Ÿåˆ—å¿…é¡»æŒä¹…åŒ–")]),t._v(" "),n("ul",[n("li",[t._v("å£°æ˜é˜Ÿåˆ—å¿…é¡»è®¾ç½®æŒä¹…åŒ– durable è®¾ç½®ä¸º true.")]),t._v(" "),n("li",[t._v("æ¶ˆæ¯æ¨é€æŠ•é€’æ¨¡å¼å¿…é¡»è®¾ç½®æŒä¹…åŒ–ï¼ŒdeliveryMode è®¾ç½®ä¸º 2ï¼ˆæŒä¹…ï¼‰ã€‚")]),t._v(" "),n("li",[t._v("æ¶ˆæ¯å·²ç»åˆ°è¾¾æŒä¹…åŒ–äº¤æ¢å™¨ã€‚")]),t._v(" "),n("li",[t._v("æ¶ˆæ¯å·²ç»åˆ°è¾¾æŒä¹…åŒ–é˜Ÿåˆ—ã€‚")])])]),t._v(" "),n("h2",{attrs:{id:"_15ã€rabiitmqæ¶ˆæ¯ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå˜æˆæ­»ä¿¡æ¶ˆæ¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_15ã€rabiitmqæ¶ˆæ¯ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå˜æˆæ­»ä¿¡æ¶ˆæ¯"}},[t._v("#")]),t._v(" 15ã€RabiitMQæ¶ˆæ¯ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå˜æˆæ­»ä¿¡æ¶ˆæ¯ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("ç”±äºç‰¹å®šçš„"),n("strong",[t._v("åŸå› å¯¼è‡´")]),t._v(" "),n("strong",[t._v("queue")]),t._v(" "),n("strong",[t._v("ä¸­çš„æŸäº›æ¶ˆæ¯æ— æ³•è¢«æ¶ˆè´¹")]),t._v("ï¼Œè¿™æ ·çš„æ¶ˆæ¯å¦‚æœæ²¡æœ‰åç»­çš„å¤„ç†ï¼Œå°±å˜æˆäº†æ­»ä¿¡æ¶ˆæ¯")])]),t._v(" "),n("h2",{attrs:{id:"_16ã€rabbitmqæ­»ä¿¡æ¶ˆæ¯çš„æ¥æº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_16ã€rabbitmqæ­»ä¿¡æ¶ˆæ¯çš„æ¥æº"}},[t._v("#")]),t._v(" 16ã€RabbitMQæ­»ä¿¡æ¶ˆæ¯çš„æ¥æºï¼Ÿ")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("æ¶ˆæ¯ TTL è¿‡æœŸ")]),t._v(" "),n("li",[t._v("é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦(é˜Ÿåˆ—æ»¡äº†ï¼Œæ— æ³•å†æ·»åŠ æ•°æ®åˆ° mq ä¸­)")]),t._v(" "),n("li",[t._v("æ¶ˆæ¯è¢«æ‹’ç»(basic.reject æˆ– basic.nack)å¹¶ä¸” requeue=false.")])])]),t._v(" "),n("h2",{attrs:{id:"_17ã€rabbitmqæ­»ä¿¡é˜Ÿåˆ—çš„ç”¨å¤„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_17ã€rabbitmqæ­»ä¿¡é˜Ÿåˆ—çš„ç”¨å¤„"}},[t._v("#")]),t._v(" 17ã€RabbitMQæ­»ä¿¡é˜Ÿåˆ—çš„ç”¨å¤„ï¼Ÿ")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("å¯ä»¥ç”¨äºå®ç°å»¶è¿Ÿé˜Ÿåˆ—")])])]),t._v(" "),n("h2",{attrs:{id:"_18ã€rabbitmqæ”¯æŒå»¶è¿Ÿé˜Ÿåˆ—å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_18ã€rabbitmqæ”¯æŒå»¶è¿Ÿé˜Ÿåˆ—å—"}},[t._v("#")]),t._v(" 18ã€RabbitMQæ”¯æŒå»¶è¿Ÿé˜Ÿåˆ—å—ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("æ”¯æŒã€‚å»¶æ—¶é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—å†…éƒ¨æ˜¯æœ‰åºçš„ï¼Œæœ€é‡è¦çš„ç‰¹æ€§å°±ä½“ç°åœ¨å®ƒçš„å»¶æ—¶å±æ€§ä¸Šï¼Œå»¶æ—¶é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ˜¯å¸Œæœ›åœ¨æŒ‡å®šæ—¶é—´åˆ°äº†ä»¥åæˆ–ä¹‹å‰å–å‡ºå’Œå¤„ç†ï¼Œç®€å•æ¥è¯´ï¼Œå»¶æ—¶é˜Ÿåˆ—å°±æ˜¯ç”¨æ¥å­˜æ”¾éœ€è¦åœ¨æŒ‡å®šæ—¶é—´è¢«å¤„ç†çš„å…ƒç´ çš„é˜Ÿåˆ—ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_19ã€rabbitmqå»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_19ã€rabbitmqå»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" 19ã€RabbitMQå»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("è®¢å•åœ¨ååˆ†é’Ÿä¹‹å†…æœªæ”¯ä»˜åˆ™è‡ªåŠ¨å–æ¶ˆ")]),t._v(" "),n("li",[t._v("æ–°åˆ›å»ºçš„åº—é“ºï¼Œå¦‚æœåœ¨åå¤©å†…éƒ½æ²¡æœ‰ä¸Šä¼ è¿‡å•†å“ï¼Œåˆ™è‡ªåŠ¨å‘é€æ¶ˆæ¯æé†’")]),t._v(" "),n("li",[t._v("ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œå¦‚æœä¸‰å¤©å†…æ²¡æœ‰ç™»é™†åˆ™è¿›è¡ŒçŸ­ä¿¡æé†’")]),t._v(" "),n("li",[t._v("ç”¨æˆ·å‘èµ·é€€æ¬¾ï¼Œå¦‚æœä¸‰å¤©å†…æ²¡æœ‰å¾—åˆ°å¤„ç†åˆ™é€šçŸ¥ç›¸å…³è¿è¥äººå‘˜")]),t._v(" "),n("li",[t._v("é¢„å®šä¼šè®®åï¼Œéœ€è¦åœ¨é¢„å®šçš„æ—¶é—´ç‚¹å‰ååˆ†é’Ÿé€šçŸ¥å„ä¸ªä¸ä¼šäººå‘˜å‚åŠ ä¼šè®®")])])]),t._v(" "),n("h2",{attrs:{id:"_20ã€rabbitmqå®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„æœ‰ä»€ä¹ˆæ¡ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_20ã€rabbitmqå®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„æœ‰ä»€ä¹ˆæ¡ä»¶"}},[t._v("#")]),t._v(" 20ã€RabbitMQå®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„æœ‰ä»€ä¹ˆæ¡ä»¶ï¼Ÿ")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("æ¶ˆæ¯è®¾ç½®TTL")]),t._v(" "),n("li",[t._v("é…ç½®äº†æ­»ä¿¡é˜Ÿåˆ—")])])]),t._v(" "),n("h2",{attrs:{id:"_21ã€rabbitmqæ€ä¹ˆå®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_21ã€rabbitmqæ€ä¹ˆå®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—"}},[t._v("#")]),t._v(" 21ã€RabbitMQæ€ä¹ˆå®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Ÿ")]),t._v(" "),n("blockquote",[n("ol",[n("li",[n("p",[t._v("æ§åˆ¶å°é¡µé¢ï¼šæ·»åŠ ä¸€ä¸ª"),n("code",[t._v("x-max-priority")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(496),alt:"image-20220902144032269"}})])]),t._v(" "),n("li",[n("p",[t._v("ç”Ÿäº§è€…æ·»åŠ ä¼˜å…ˆçº§ï¼Œæ¡ˆä¾‹ä»£ç ")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" QUEUE_NAME "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Channel")]),t._v(" channel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RabbitMQConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChannel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç»™æ¶ˆæ¯èµ‹äºˆä¸€ä¸ª priority å±æ€§")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AMQP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BasicProperties")]),t._v(" basicProperties "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AMQP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BasicProperties")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("priority")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" msg "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"info"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    channel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("basicPublish")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" QUEUE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" basicProperties"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    channel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("basicPublish")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" QUEUE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‘é€æ¶ˆæ¯å®Œæˆ:"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br")])])]),t._v(" "),n("li",[n("p",[t._v("æ¶ˆè´¹è€…é˜Ÿåˆ—ä¸­ä»£ç æ·»åŠ ä¼˜å…ˆçº§")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Consumer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" QUEUE_NAME "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Channel")]),t._v(" channel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RabbitMQConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChannel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è®¾ç½®é˜Ÿåˆ—çš„æœ€å¤§ä¼˜å…ˆçº§ æœ€å¤§å¯ä»¥è®¾ç½®åˆ° 255 å®˜ç½‘æ¨è 1-10 å¦‚æœè®¾ç½®å¤ªé«˜æ¯”è¾ƒåƒå†…å­˜å’Œ CPU")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" map "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x-max-priority"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        channel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("queueDeclare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("QUEUE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ¶ˆè´¹è€…ç­‰å¾…å¯åŠ¨æ¥æ”¶æ¶ˆæ¯......"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeliverCallback")]),t._v(" deliverCallback "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("consumerTag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" delivery"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" receivedMessage "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delivery"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ¥æ”¶åˆ°æ¶ˆæ¯:"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("receivedMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        channel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("basicConsume")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("QUEUE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deliverCallback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("consumerTag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ¶ˆè´¹è€…æ— æ³•æ¶ˆè´¹æ¶ˆæ¯æ—¶è°ƒç”¨ï¼Œå¦‚é˜Ÿåˆ—è¢«åˆ é™¤"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])])])])]),t._v(" "),n("h2",{attrs:{id:"_22ã€å“ªäº›æƒ…å†µä¸‹æ¨èä½¿ç”¨rabbitmqçš„æƒ°æ€§é˜Ÿåˆ—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_22ã€å“ªäº›æƒ…å†µä¸‹æ¨èä½¿ç”¨rabbitmqçš„æƒ°æ€§é˜Ÿåˆ—"}},[t._v("#")]),t._v(" 22ã€å“ªäº›æƒ…å†µä¸‹æ¨èä½¿ç”¨RabbitMQçš„æƒ°æ€§é˜Ÿåˆ—")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("é˜Ÿåˆ—å¯èƒ½ä¼šäº§ç”Ÿæ¶ˆæ¯å †ç§¯")]),t._v(" "),n("li",[t._v("é˜Ÿåˆ—å¯¹æ€§èƒ½ï¼ˆååé‡ï¼‰çš„è¦æ±‚ä¸æ˜¯éå¸¸é«˜ï¼Œä¾‹å¦‚TPS 1ä¸‡ä»¥ä¸‹çš„åœºæ™¯")]),t._v(" "),n("li",[t._v("å¸Œæœ›é˜Ÿåˆ—æœ‰ç¨³å®šçš„ç”Ÿäº§æ¶ˆè´¹æ€§èƒ½ï¼Œä¸å—å†…å­˜å½±å“è€Œæ³¢åŠ¨")])])]),t._v(" "),n("h2",{attrs:{id:"_23ã€rabbitmqå¦‚ä½•å¤„ç†æ¶ˆæ¯å †ç§¯æƒ…å†µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_23ã€rabbitmqå¦‚ä½•å¤„ç†æ¶ˆæ¯å †ç§¯æƒ…å†µ"}},[t._v("#")]),t._v(" 23ã€RabbitMQå¦‚ä½•å¤„ç†æ¶ˆæ¯å †ç§¯æƒ…å†µï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("æ–¹æ³•ï¼š"),n("strong",[t._v("ä¸´æ—¶æ‰©å®¹ï¼Œå¿«é€Ÿå¤„ç†ç§¯å‹çš„æ¶ˆæ¯")])]),t._v(" "),n("ul",[n("li",[t._v("å…ˆä¿®å¤ consumer çš„é—®é¢˜ï¼Œç¡®ä¿å…¶æ¢å¤æ¶ˆè´¹é€Ÿåº¦ï¼Œç„¶åå°†ç°æœ‰çš„ consumer éƒ½åœæ‰ï¼›")]),t._v(" "),n("li",[t._v("ä¸´æ—¶åˆ›å»ºåŸå…ˆ N å€æ•°é‡çš„ queue ï¼Œç„¶åå†™ä¸€ä¸ªä¸´æ—¶åˆ†å‘æ•°æ®çš„æ¶ˆè´¹è€…ç¨‹åºï¼Œå°†è¯¥ç¨‹åºéƒ¨ç½²ä¸Šå»æ¶ˆè´¹é˜Ÿåˆ—ä¸­ç§¯å‹çš„æ•°æ®ï¼Œæ¶ˆè´¹ä¹‹åä¸åšä»»ä½•è€—æ—¶å¤„ç†ï¼Œç›´æ¥å‡åŒ€è½®è¯¢å†™å…¥ä¸´æ—¶å»ºç«‹å¥½çš„ N å€æ•°é‡çš„ queue ä¸­ï¼›")]),t._v(" "),n("li",[t._v("æ¥ç€ï¼Œä¸´æ—¶å¾ç”¨ N å€çš„æœºå™¨æ¥éƒ¨ç½² consumerï¼Œæ¯ä¸ª consumer æ¶ˆè´¹ä¸€ä¸ªä¸´æ—¶ queue çš„æ•°æ®")]),t._v(" "),n("li",[t._v("ç­‰å¿«é€Ÿæ¶ˆè´¹å®Œç§¯å‹æ•°æ®ä¹‹åï¼Œæ¢å¤åŸå…ˆéƒ¨ç½²æ¶æ„ ï¼Œé‡æ–°ç”¨åŸå…ˆçš„ consumer æœºå™¨æ¶ˆè´¹æ¶ˆæ¯ã€‚")])]),t._v(" "),n("p",[t._v("è¿™ç§åšæ³•ç›¸å½“äºä¸´æ—¶å°† queue èµ„æºå’Œ consumer èµ„æºæ‰©å¤§ N å€ï¼Œä»¥æ­£å¸¸ N å€é€Ÿåº¦æ¶ˆè´¹ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_24ã€rabbitmqå¦‚ä½•å¤„ç†æ¶ˆæ¯å †ç§¯è¿‡ç¨‹ä¸­ä¸¢å¤±çš„æ•°æ®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_24ã€rabbitmqå¦‚ä½•å¤„ç†æ¶ˆæ¯å †ç§¯è¿‡ç¨‹ä¸­ä¸¢å¤±çš„æ•°æ®"}},[t._v("#")]),t._v(" 24ã€RabbitMQå¦‚ä½•å¤„ç†æ¶ˆæ¯å †ç§¯è¿‡ç¨‹ä¸­ä¸¢å¤±çš„æ•°æ®ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("é‡‡ç”¨**â€œæ‰¹é‡é‡å¯¼â€**çš„æ–¹å¼ï¼Œåœ¨æµé‡ä½å³°æœŸï¼Œå†™ä¸€ä¸ªç¨‹åºï¼Œæ‰‹åŠ¨å»æŸ¥è¯¢ä¸¢å¤±çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œç„¶åå°†æ¶ˆæ¯é‡æ–°å‘é€åˆ°mqé‡Œé¢ï¼ŒæŠŠä¸¢å¤±çš„æ•°æ®é‡æ–°è¡¥å›æ¥ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_25ã€rabbitmqå¦‚ä½•å¤„ç†é•¿æ—¶é—´æœªå¤„ç†å¯¼è‡´å†™æ»¡çš„æƒ…å†µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_25ã€rabbitmqå¦‚ä½•å¤„ç†é•¿æ—¶é—´æœªå¤„ç†å¯¼è‡´å†™æ»¡çš„æƒ…å†µ"}},[t._v("#")]),t._v(" 25ã€RabbitMQå¦‚ä½•å¤„ç†é•¿æ—¶é—´æœªå¤„ç†å¯¼è‡´å†™æ»¡çš„æƒ…å†µï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("å¦‚æœæ¶ˆæ¯ç§¯å‹åœ¨RabbitMQé‡Œï¼Œå¹¶ä¸”é•¿æ—¶é—´éƒ½æ²¡å¤„ç†æ‰ï¼Œå¯¼è‡´RabbitMQéƒ½å¿«å†™æ»¡äº†ï¼Œè¿™ç§æƒ…å†µè‚¯å®šæ˜¯ä¸´æ—¶æ‰©å®¹æ–¹æ¡ˆæ‰§è¡Œå¤ªæ…¢ï¼›è¿™ç§æ—¶å€™åªå¥½é‡‡ç”¨ "),n("strong",[t._v("â€œä¸¢å¼ƒ+æ‰¹é‡é‡å¯¼â€")]),t._v(" çš„æ–¹å¼æ¥è§£å†³äº†ã€‚é¦–å…ˆï¼Œä¸´æ—¶å†™ä¸ªç¨‹åºï¼Œè¿æ¥åˆ°RabbitMQé‡Œé¢æ¶ˆè´¹æ•°æ®ï¼Œæ¶ˆè´¹ä¸€ä¸ªä¸¢å¼ƒä¸€ä¸ªï¼Œå¿«é€Ÿæ¶ˆè´¹æ‰ç§¯å‹çš„æ¶ˆæ¯ï¼Œé™ä½RabbitMQçš„å‹åŠ›ï¼Œç„¶ååœ¨æµé‡ä½å³°æœŸæ—¶å»æ‰‹åŠ¨æŸ¥è¯¢é‡å¯¼ä¸¢å¤±çš„è¿™éƒ¨åˆ†æ•°æ®ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"_26ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_26ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—"}},[t._v("#")]),t._v(" 26ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ")]),t._v(" "),n("blockquote",[n("p",[t._v("è¦è€ƒè™‘ä¸‰ç‚¹ï¼šä¼¸ç¼©æ€§ã€æŒä¹…åŒ–ã€å¯ç”¨æ€§")]),t._v(" "),n("ol",[n("li",[t._v("ä¼¸ç¼©æ€§ï¼šéœ€è¦æ‰©å®¹çš„æ—¶å€™å¯ä»¥å¿«é€Ÿæ‰©å®¹ï¼Œå¢åŠ ååé‡å’Œå®¹é‡ï¼›å¯ä»¥å‚è€ƒ"),n("code",[t._v("kafaka")]),t._v("çš„è®¾è®¡ç†å¿µï¼Œbroker -> topic -> partitionï¼Œæ¯ä¸ªpartitionæ”¾ä¸€ä¸ªæœºå™¨ï¼Œå°±å­˜ä¸€éƒ¨åˆ†æ•°æ®ï¼›èµ„æºä¸å¤Ÿäº†ï¼Œç»™topicå¢åŠ partitionï¼Œç„¶ååšæ•°æ®è¿ç§»ï¼Œå¢åŠ æœºå™¨ï¼›")]),t._v(" "),n("li",[t._v("æŒä¹…åŒ–ï¼šä¹Ÿå°±æ˜¯æ•°æ®è¦ä¸è¦å†™å…¥ç£ç›˜ï¼Œä¸å†™å…¥å§ï¼Œè¿›ç¨‹æŒ‚äº†ï¼Œæ•°æ®å°±ä¸¢å¤±äº†ï¼Œå†™å…¥ç£ç›˜è¯¥å¦‚ä½•é«˜æ•ˆå†™å…¥å‘¢ï¼Ÿ"),n("code",[t._v("kafaka")]),t._v("çš„æ€è·¯ï¼šé¡ºåºè¯»å†™ï¼Œé‡‡ç”¨ç£ç›˜ç¼“å­˜ï¼ˆPage Cacheï¼‰çš„ç­–ç•¥ï¼Œæ“ä½œç³»ç»Ÿé‡‡ç”¨é¢„è¯»å’Œåå†™çš„æ–¹å¼ï¼Œå¯¹ç£ç›˜è¿›è¡Œä¼˜åŒ–ã€‚\n"),n("ul",[n("li",[t._v("é¢„è¯»ï¼šç£ç›˜é¡ºåºè¯»å–çš„æ•ˆç‡æ˜¯å¾ˆé«˜çš„ï¼ˆä¸éœ€è¦å¯»é“æ—¶é—´ï¼Œåªéœ€è¦å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼‰ã€‚è€Œåœ¨è¯»å–ç£ç›˜æŸå—æ•°æ®æ—¶ï¼ŒåŒæ—¶ä¼šé¡ºåºè¯»å–ç›¸é‚»åœ°å€çš„æ•°æ®åŠ è½½åˆ°PageCacheï¼Œè¿™æ ·åœ¨è¯»å–åç»­è¿ç»­æ•°æ®æ—¶ï¼Œåªéœ€è¦ä»PageCacheä¸­è¯»å–æ•°æ®ï¼Œç›¸å½“äºå†…å­˜è¯»å†™ï¼Œé€Ÿåº¦ä¼šç‰¹åˆ«å¿«")]),t._v(" "),n("li",[t._v("åå†™ï¼šæ•°æ®å¹¶ä¸æ˜¯ç›´æ¥å†™å…¥åˆ°ç£ç›˜ï¼Œè€Œæ˜¯é»˜è®¤å…ˆå†™å…¥åˆ°Page Cacheï¼Œå†ç”±Page Cacheåˆ·æ–°åˆ°ç£ç›˜ï¼Œåˆ·æ–°é¢‘ç‡æ˜¯ç”±æ“ä½œç³»ç»Ÿå‘¨æœŸæ€§çš„syncè§¦å‘çš„ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨syncè§¦å‘åˆ·æ–°æ“ä½œï¼‰ã€‚åå†™çš„æ–¹å¼å¤§å¤§å‡å°‘å¯¹ç£ç›˜çš„æ€»å†™å…¥æ¬¡æ•°ï¼Œæé«˜å†™å…¥æ•ˆç‡")])])]),t._v(" "),n("li",[t._v("å¯ç”¨æ€§ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„é«˜å¯ç”¨å‡ ä¹éƒ½æ˜¯é€šè¿‡å†—ä½™å®ç°çš„ï¼ŒKafkaåŒæ ·å¦‚æ­¤ã€‚Kafkaçš„æ¶ˆæ¯å­˜å‚¨åˆ°partitionä¸­ï¼Œæ¯ä¸ªpartitionåœ¨å…¶ä»–çš„brokerä¸­éƒ½å­˜åœ¨å¤šä¸ªå‰¯æœ¬ã€‚å¯¹å¤–é€šè¿‡ä¸»partitionæä¾›è¯»å†™æœåŠ¡ï¼Œå½“ä¸»partitionæ‰€åœ¨çš„brokeræ•…éšœæ—¶ï¼Œé€šè¿‡HAæœºåˆ¶ï¼Œå°†å…¶ä»–Brokerä¸Šçš„æŸä¸ªå‰¯æœ¬partitionä¼šé‡æ–°é€‰ä¸¾æˆä¸»partitionï¼Œç»§ç»­å¯¹å¤–æä¾›æœåŠ¡ã€‚")])])])])}),[],!1,null,null,null);a.default=e.exports},488:function(t,a,s){t.exports=s.p+"assets/img/image-20220706161100945.b026f50f.png"},489:function(t,a,s){t.exports=s.p+"assets/img/image-20220706162933487.46201050.png"},490:function(t,a,s){t.exports=s.p+"assets/img/image-20220708092548210.118ac01f.png"},491:function(t,a,s){t.exports=s.p+"assets/img/image-20220807220356530.224b778e.png"},492:function(t,a,s){t.exports=s.p+"assets/img/image-20220816230638693.0612eeca.png"},493:function(t,a,s){t.exports=s.p+"assets/img/image-20220816230733324.0570d7c2.png"},494:function(t,a,s){t.exports=s.p+"assets/img/image-20220816230820807.afb7ced7.png"},495:function(t,a,s){t.exports=s.p+"assets/img/image-20220816230958075.77aba0ae.png"},496:function(t,a,s){t.exports=s.p+"assets/img/image-20220902144032269.8af76baf.png"}}]);