<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1、MySQL 事务隔离级别 | 小熊学Java</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?c1b38aee20eeeb56adb65146a17e0b47";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
        </script>
    <meta name="description" content="你的未来时刻会因为的你努力而改变">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="baidu-site-verification" content="code-FVmKyJMz00">
    <meta name="360-site-verification" content="b9b356af59f019380844a85d5b887d22">
    
    <link rel="preload" href="/assets/css/0.styles.cb15703a.css" as="style"><link rel="preload" href="/assets/js/app.f8e868ec.js" as="script"><link rel="preload" href="/assets/js/11.ed1ff478.js" as="script"><link rel="preload" href="/assets/js/1.106fe0cd.js" as="script"><link rel="preload" href="/assets/js/24.ca85beba.js" as="script"><link rel="prefetch" href="/assets/js/10.30c4c9e1.js"><link rel="prefetch" href="/assets/js/12.e2e56c6c.js"><link rel="prefetch" href="/assets/js/13.845e5f3d.js"><link rel="prefetch" href="/assets/js/14.aa69a1d5.js"><link rel="prefetch" href="/assets/js/15.b7591306.js"><link rel="prefetch" href="/assets/js/16.60ee23f2.js"><link rel="prefetch" href="/assets/js/17.89a2aa27.js"><link rel="prefetch" href="/assets/js/18.9b4e8ff8.js"><link rel="prefetch" href="/assets/js/19.6544ad12.js"><link rel="prefetch" href="/assets/js/20.c6cf3d86.js"><link rel="prefetch" href="/assets/js/21.4781fcb5.js"><link rel="prefetch" href="/assets/js/22.0da616db.js"><link rel="prefetch" href="/assets/js/23.aa86440a.js"><link rel="prefetch" href="/assets/js/25.26658a1e.js"><link rel="prefetch" href="/assets/js/26.49210e03.js"><link rel="prefetch" href="/assets/js/27.7fe37d7a.js"><link rel="prefetch" href="/assets/js/28.76351f7c.js"><link rel="prefetch" href="/assets/js/29.4af72eeb.js"><link rel="prefetch" href="/assets/js/3.15fa91bb.js"><link rel="prefetch" href="/assets/js/30.efed4f0b.js"><link rel="prefetch" href="/assets/js/31.9dfa83df.js"><link rel="prefetch" href="/assets/js/32.b38f490c.js"><link rel="prefetch" href="/assets/js/33.747152b2.js"><link rel="prefetch" href="/assets/js/34.963c825f.js"><link rel="prefetch" href="/assets/js/35.49c67970.js"><link rel="prefetch" href="/assets/js/36.fc848cc7.js"><link rel="prefetch" href="/assets/js/37.fb1f3fa3.js"><link rel="prefetch" href="/assets/js/38.cde1229b.js"><link rel="prefetch" href="/assets/js/39.c742ec7e.js"><link rel="prefetch" href="/assets/js/4.b0a99a6b.js"><link rel="prefetch" href="/assets/js/40.4c36b35a.js"><link rel="prefetch" href="/assets/js/41.d91389c3.js"><link rel="prefetch" href="/assets/js/42.14852017.js"><link rel="prefetch" href="/assets/js/43.25e7101f.js"><link rel="prefetch" href="/assets/js/44.691da407.js"><link rel="prefetch" href="/assets/js/45.8bfdfd23.js"><link rel="prefetch" href="/assets/js/46.d6fe6fdc.js"><link rel="prefetch" href="/assets/js/47.b9573203.js"><link rel="prefetch" href="/assets/js/48.e90c2b9d.js"><link rel="prefetch" href="/assets/js/49.414b690d.js"><link rel="prefetch" href="/assets/js/5.a4ab8359.js"><link rel="prefetch" href="/assets/js/50.55156507.js"><link rel="prefetch" href="/assets/js/51.e6e2fc71.js"><link rel="prefetch" href="/assets/js/52.4f65eb28.js"><link rel="prefetch" href="/assets/js/53.a8a2d304.js"><link rel="prefetch" href="/assets/js/54.85730ad6.js"><link rel="prefetch" href="/assets/js/55.00914ce6.js"><link rel="prefetch" href="/assets/js/56.5d79fe51.js"><link rel="prefetch" href="/assets/js/57.dd3ba2ac.js"><link rel="prefetch" href="/assets/js/58.b9a8c722.js"><link rel="prefetch" href="/assets/js/59.7dac7d2f.js"><link rel="prefetch" href="/assets/js/6.313944b4.js"><link rel="prefetch" href="/assets/js/60.c4ce7217.js"><link rel="prefetch" href="/assets/js/61.795ef1a4.js"><link rel="prefetch" href="/assets/js/62.5302a1fb.js"><link rel="prefetch" href="/assets/js/63.d86c0d2c.js"><link rel="prefetch" href="/assets/js/64.193a7e2e.js"><link rel="prefetch" href="/assets/js/65.54122f04.js"><link rel="prefetch" href="/assets/js/66.f1cfc8a9.js"><link rel="prefetch" href="/assets/js/67.279aac90.js"><link rel="prefetch" href="/assets/js/68.0dda3400.js"><link rel="prefetch" href="/assets/js/69.ebdba5e7.js"><link rel="prefetch" href="/assets/js/7.828abc00.js"><link rel="prefetch" href="/assets/js/70.2d116860.js"><link rel="prefetch" href="/assets/js/71.e78ab5fd.js"><link rel="prefetch" href="/assets/js/72.b7fad28c.js"><link rel="prefetch" href="/assets/js/73.87a21d31.js"><link rel="prefetch" href="/assets/js/74.2599783d.js"><link rel="prefetch" href="/assets/js/75.727ae68d.js"><link rel="prefetch" href="/assets/js/76.299dfe88.js"><link rel="prefetch" href="/assets/js/77.4feb44c4.js"><link rel="prefetch" href="/assets/js/78.85e617db.js"><link rel="prefetch" href="/assets/js/79.ccada80d.js"><link rel="prefetch" href="/assets/js/8.c7d10089.js"><link rel="prefetch" href="/assets/js/80.d1cce118.js"><link rel="prefetch" href="/assets/js/81.8814728b.js"><link rel="prefetch" href="/assets/js/82.12cdb6b7.js"><link rel="prefetch" href="/assets/js/83.87a249eb.js"><link rel="prefetch" href="/assets/js/84.35319cc0.js"><link rel="prefetch" href="/assets/js/85.06e64369.js"><link rel="prefetch" href="/assets/js/9.fcc3a2d7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cb15703a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>小熊学Java</h3> <p class="description" data-v-59e6cb88>你的未来时刻会因为的你努力而改变</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>小熊学Java</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2022
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="小熊学Java" class="logo"> <span class="site-name">小熊学Java</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  🏠首页
</a></div><div class="nav-item"><a href="/brush/" class="nav-link"><i class="undefined"></i>
  📝码不停题
</a></div><div class="nav-item"><a href="/interview/" class="nav-link router-link-active"><i class="undefined"></i>
  💸面试专栏
</a></div><div class="nav-item"><a href="/install/" class="nav-link"><i class="undefined"></i>
  📖安装教程
</a></div><div class="nav-item"><a href="/notes/" class="nav-link"><i class="undefined"></i>
  📓学习笔记
</a></div><div class="nav-item"><a href="/architecture/" class="nav-link"><i class="undefined"></i>
  🛠架构设计
</a></div><div class="nav-item"><a href="/about/me.html" class="nav-link"><i class="undefined"></i>
  👨‍关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    小熊学Java
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>57</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  🏠首页
</a></div><div class="nav-item"><a href="/brush/" class="nav-link"><i class="undefined"></i>
  📝码不停题
</a></div><div class="nav-item"><a href="/interview/" class="nav-link router-link-active"><i class="undefined"></i>
  💸面试专栏
</a></div><div class="nav-item"><a href="/install/" class="nav-link"><i class="undefined"></i>
  📖安装教程
</a></div><div class="nav-item"><a href="/notes/" class="nav-link"><i class="undefined"></i>
  📓学习笔记
</a></div><div class="nav-item"><a href="/architecture/" class="nav-link"><i class="undefined"></i>
  🛠架构设计
</a></div><div class="nav-item"><a href="/about/me.html" class="nav-link"><i class="undefined"></i>
  👨‍关于
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/javaBasics/overview.html" class="sidebar-link">Java概述</a></li><li><a href="/interview/javaBasics/objectOriented.html" class="sidebar-link">Java面向对象</a></li><li><a href="/interview/javaBasics/javaSE.html" class="sidebar-link">JavaSE</a></li><li><a href="/interview/javaBasics/typeOfData.html" class="sidebar-link">Java数据类型</a></li><li><a href="/interview/javaBasics/exception.html" class="sidebar-link">Java异常</a></li><li><a href="/interview/javaBasics/collection.html" class="sidebar-link">Java集合</a></li><li><a href="/interview/javaBasics/multithreading.html" class="sidebar-link">Java多线程</a></li><li><a href="/interview/javaBasics/io.html" class="sidebar-link">Java IO</a></li><li><a href="/interview/javaBasics/innerClass.html" class="sidebar-link">Java内部类</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/javaHighLevel/reflection.html" class="sidebar-link">Java反射</a></li><li><a href="/interview/javaHighLevel/jvm.html" class="sidebar-link">JVM</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/computer/network.html" class="sidebar-link">计算机网络</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/database/redis.html" class="sidebar-link">Redis</a></li><li><a href="/interview/database/MySQL.html" class="sidebar-link">MySQL</a></li><li><a href="/interview/database/MySQLTopics.html" aria-current="page" class="active sidebar-link">MySQL专题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/framework/Spring.html" class="sidebar-link">Spring</a></li><li><a href="/interview/framework/Spring MVC.html" class="sidebar-link">Spring MVC</a></li><li><a href="/interview/framework/Mybatis.html" class="sidebar-link">Mybatis</a></li><li><a href="/interview/framework/Spring Boot.html" class="sidebar-link">Spring Boot</a></li><li><a href="/interview/framework/Spring Cloud.html" class="sidebar-link">Spring Cloud</a></li><li><a href="/interview/framework/Spring Cloud Alibaba.html" class="sidebar-link">Spring Cloud Alibaba</a></li><li><a href="/interview/framework/RabbitMQ.html" class="sidebar-link">RabbitMQ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>底层源码</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/sourceCode/ArrayList.html" class="sidebar-link">ArrayList扩容机制</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>小熊学Java</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2022
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">1、MySQL 事务隔离级别</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>小熊学Java</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="_1、mysql-事务隔离级别"><a href="#_1、mysql-事务隔离级别" class="header-anchor">#</a> 1、MySQL 事务隔离级别</h2> <ul><li><p>未提交读 - 读到其它事务未提交的数据（最新的版本）</p> <ul><li>错误现象：有脏读、不可重复读、幻读现象</li></ul></li> <li><p>提交读（RC） - 读到其它事务已提交的数据（最新已提交的版本）</p> <ul><li>错误现象：有不可重复读、幻读现象</li> <li>使用场景：希望看到最新的有效值</li></ul></li> <li><p>可重复读（RR） - 在事务范围内，多次读能够保证一致性（快照建立时最新已提交版本）</p> <ul><li>错误现象：有幻读现象，可以用加锁避免</li> <li>使用场景：事务内要求更强的一致性，但看到的未必是最新的有效值</li></ul></li> <li><p>串行读 - 在事务范围内，仅有读读可以并发，读写或写写会阻塞其它事务，用这种办法保证更强的一致性</p> <ul><li>错误现象：无</li></ul></li></ul> <h4 id="_1、脏读现象"><a href="#_1、脏读现象" class="header-anchor">#</a> 1、脏读现象</h4> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set session transaction isolation level read uncommitted;</td> <td></td></tr> <tr><td>start transaction;</td> <td></td></tr> <tr><td>select * from account;/<em>两个账户都为 1000</em>/</td> <td></td></tr> <tr><td></td> <td>start transaction;</td></tr> <tr><td></td> <td>update account set balance = 2000 where accountNo=1;</td></tr> <tr><td>select * from account;/<em>1号账户2000, 2号账户1000</em>/</td> <td></td></tr></tbody></table> <p><img src="/assets/img/image-20221022101307568.a4c07013.png" alt="image-20221022101307568"></p> <blockquote><p>tx2 未提交的情况下，tx1 仍然读取到了它的更改，此时与第一次读取的数据不一致，则是产生了脏读</p></blockquote> <h4 id="_2、不可重复读现象"><a href="#_2、不可重复读现象" class="header-anchor">#</a> 2、不可重复读现象</h4> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level read committed;</td> <td></td></tr> <tr><td>start  transaction;</td> <td></td></tr> <tr><td>select  * from account; /<em>两个账户都为 1000</em>/</td> <td></td></tr> <tr><td></td> <td>update  account set balance = 2000 where accountNo=1;</td></tr> <tr><td>select  * from account; /<em>1号账户2000, 2号账户1000</em>/</td> <td></td></tr></tbody></table> <p><img src="/assets/img/image-20221022101453527.622f2694.png" alt="image-20221022101453527"></p> <blockquote><p>tx1 在同一事务内，两次读取的结果不一致，当然，此时 tx2 的事务已提交</p></blockquote> <h4 id="_3、幻读现象"><a href="#_3、幻读现象" class="header-anchor">#</a> 3、幻读现象</h4> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level repeatable read;</td> <td></td></tr> <tr><td>start  transaction;</td> <td></td></tr> <tr><td>select  * from account; /<em>存在 1,2 两个账户</em>/</td> <td></td></tr> <tr><td></td> <td>insert  into account values(3, 1000);</td></tr> <tr><td>select  * from account; /<em>发现还是只有 1,2 两个账户</em>/</td> <td></td></tr> <tr><td>insert  into account values(3, 5000);  /* ERROR  1062 (23000): Duplicate entry '3' for key 'PRIMARY'  */</td> <td></td></tr></tbody></table> <p><img src="/assets/img/image-20221022105234049.de3df162.png" alt="image-20221022105234049"></p> <blockquote><p>tx1 查询时并没有发现 3 号账户，执行插入时却发现主键冲突异常，就好像出现了幻觉一样</p></blockquote> <h4 id="_4、使用-for-update-避免幻读现象"><a href="#_4、使用-for-update-避免幻读现象" class="header-anchor">#</a> 4、使用 for update 避免幻读现象</h4> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level repeatable read;</td> <td></td></tr> <tr><td>start  transaction;</td> <td></td></tr> <tr><td>select  * from account; /<em>存在 1,2 两个账户</em>/</td> <td></td></tr> <tr><td>select  * from account where accountNo=3  for update;</td> <td></td></tr> <tr><td></td> <td>insert  into account values(3, 1000);  /* 阻塞 */</td></tr> <tr><td>insert  into account values(3, 5000);</td> <td></td></tr></tbody></table> <ul><li>在 for update 这行语句执行时，虽然此时 3 号账户尚不存在，但 MySQL 在 repeatable read 隔离级别下会用间隙锁，锁住 2 号记录与正无穷大之间的间隙</li> <li>此时 tx2 想插入 3 号记录就不行了，被间隙锁挡住了</li></ul> <h4 id="_5、串行读避免幻读"><a href="#_5、串行读避免幻读" class="header-anchor">#</a> 5、串行读避免幻读</h4> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level serializable;</td> <td></td></tr> <tr><td>start  transaction;</td> <td></td></tr> <tr><td>select  * from account; /* 存在 1,2 两个账户 */</td> <td></td></tr> <tr><td></td> <td>insert  into account values(3, 1000);  /* 阻塞 */</td></tr> <tr><td>insert  into account values(3, 5000);</td> <td></td></tr></tbody></table> <blockquote><p>串行读隔离级别下，普通的 select 也会加共享读锁，其它事务的查询可以并发，但增删改就只能阻塞了</p></blockquote> <h2 id="_2、快照读与当前读"><a href="#_2、快照读与当前读" class="header-anchor">#</a> 2、快照读与当前读</h2> <h4 id="_1、当前读"><a href="#_1、当前读" class="header-anchor">#</a> 1、当前读</h4> <blockquote><p>当前读，即读取最新提交的数据，查询时需要加锁，以下情况都属于当前读</p> <ul><li><p>select … for update</p></li> <li><p>insert、update、delete，都会按最新提交的数据进行操作</p></li></ul></blockquote> <h4 id="_2、快照读"><a href="#_2、快照读" class="header-anchor">#</a> 2、快照读</h4> <blockquote><p>快照读，读取某一个快照建立时（可以理解为某一时间点）的数据，快照读主要体现在 select 时，不同隔离级别下，select 的行为不同</p> <ul><li>在 Serializable 隔离级别下 - 普通 select 也变成当前读</li> <li>在 RC 隔离级别下 - 每次 select 都会建立新的快照</li> <li>在 RR 隔离级别下
<ul><li>事务启动后，首次 select 会建立快照</li> <li>如果事务启动选择了 with consistent snapshot，事务启动时就建立快照</li> <li>基于旧数据的修改操作，会重新建立快照</li></ul></li></ul> <p><strong>快照读本质上读取的是历史数据（原理是回滚段），属于无锁查询</strong></p></blockquote> <h5 id="_1、rr-下-快照建立时机-第一次-select-时"><a href="#_1、rr-下-快照建立时机-第一次-select-时" class="header-anchor">#</a> 1、RR 下，快照建立时机 - 第一次 select 时</h5> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level repeatable read;</td> <td></td></tr> <tr><td>start  transaction;</td> <td></td></tr> <tr><td>select  * from account;  /* 此时建立快照，两个账户为 1000  */</td> <td></td></tr> <tr><td></td> <td>update  account set balance = 2000 where accountNo=1;</td></tr> <tr><td>select  * from account;  /* 两个账户仍为 1000 */</td> <td></td></tr></tbody></table> <ul><li>快照一旦建立，以后的查询都基于此快照，因此 tx1 中第二次 select 仍然得到 1 号账户余额为 1000</li></ul> <p>如果 tx2 的 update 先执行</p> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level repeatable read;</td> <td></td></tr> <tr><td>start  transaction;</td> <td></td></tr> <tr><td></td> <td>update  account set balance = 2000 where accountNo=1;</td></tr> <tr><td>select  * from account; /* 此时建立快照，1号余额已经为2000 */</td> <td></td></tr></tbody></table> <h5 id="_2、rr-下-快照建立时机-事务启动时"><a href="#_2、rr-下-快照建立时机-事务启动时" class="header-anchor">#</a> 2、RR 下，快照建立时机 - 事务启动时</h5> <p>如果希望事务启动时就建立快照，可以添加 with consistent snapshot 选项</p> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level repeatable read;</td> <td></td></tr> <tr><td>start  transaction with consistent snapshot; /* 此时建立快照，两个账户为 1000  */</td> <td></td></tr> <tr><td></td> <td>update  account set balance = 2000 where accountNo=1;</td></tr> <tr><td>select  * from account; /* 两个账户仍为 1000 */</td> <td></td></tr></tbody></table> <h5 id="_3、rr-下-快照建立时机-修改数据时"><a href="#_3、rr-下-快照建立时机-修改数据时" class="header-anchor">#</a> 3、RR 下，快照建立时机 - 修改数据时</h5> <table><thead><tr><th><strong>tx1</strong></th> <th><strong>tx2</strong></th></tr></thead> <tbody><tr><td>set  session transaction isolation level repeatable read;</td> <td></td></tr> <tr><td>start  transaction;</td> <td></td></tr> <tr><td>select  * from account; /* 此时建立快照，两个账户为 1000 */</td> <td></td></tr> <tr><td></td> <td>update  account set balance=balance+1000 where accountNo=1;</td></tr> <tr><td>update  account set balance=balance+1000 where accountNo=1;</td> <td></td></tr> <tr><td>select  * from account; /* 1号余额为3000 */</td> <td></td></tr></tbody></table> <ul><li>tx1 内的修改必须重新建立快照，否则，就会发生丢失更新的问题</li></ul> <h2 id="_3、innodb-vs-myisam"><a href="#_3、innodb-vs-myisam" class="header-anchor">#</a> 3、InnoDB vs MyISAM</h2> <h4 id="_1、innodb"><a href="#_1、innodb" class="header-anchor">#</a> 1、InnoDB</h4> <blockquote><ul><li><p>索引分为聚簇索引与二级索引</p> <ul><li>聚簇索引：主键值作为索引数据，叶子节点还包含了所有字段数据，索引和数据是存储在一起的</li> <li>二级索引：除主键外的其它字段建立的索引称为二级索引。被索引的字段值作为索引数据，叶子节点还包含了主键值</li></ul></li> <li><p>支持事务</p> <ul><li>通过 undo log 支持事务回滚、当前读（多版本查询）</li> <li>通过 redo log 实现持久性</li> <li>通过两阶段提交实现一致性</li> <li>通过当前读、锁实现隔离性</li></ul></li> <li><p>支持行锁、间隙锁</p></li> <li><p>支持外键</p></li></ul></blockquote> <p><strong>InnoDB 索引特点</strong></p> <p>聚簇索引：主键值作为索引数据，叶子节点还包含了所有字段数据，索引和数据是存储在一起的</p> <p><img src="/assets/img/image-20210901155308778.3ca6ec2f.png" alt="image-20210901155308778"></p> <ul><li>主键即 7369、7499、7521 等</li></ul> <p>二级索引：除主键外的其它字段建立的索引称为二级索引。被索引的字段值作为索引数据，叶子节点还包含了主键值</p> <p><img src="/assets/img/image-20210901155317460.5e9e106e.png" alt="image-20210901155317460"></p> <ul><li>上图中 800、950、1100 这些是工资字段的值，根据它们建立了二级索引</li></ul> <p><img src="/assets/img/image-20210901155327838.80dc4251.png" alt="image-20210901155327838"></p> <ul><li>上图中，如果执行查询 <code>select empno, ename, sal from emp where sal = 800</code>，这时候可以利用二级索引定位到 800 这个工资，同时还能知道主键值 7369</li> <li>但 select 字句中还出现了 ename 字段，在二级索引中不存在，因此需要根据主键值 7369 查询聚簇索引来获取 ename 的信息，这个过程俗称<strong>回表</strong></li></ul> <h4 id="_2、myisam"><a href="#_2、myisam" class="header-anchor">#</a> 2、MyISAM</h4> <blockquote><ul><li><p>索引只有一种</p> <ul><li>被索引字段值作为索引数据，叶子节点还包含了该记录数据页地址，数据和索引是分开存储的</li></ul></li> <li><p>不支持事务，没有 undo log 和 redo log</p></li> <li><p>仅支持表锁</p></li> <li><p>不支持外键</p></li> <li><p>会保存表的总行数</p></li></ul></blockquote> <p><strong>MyISAM 索引特点</strong></p> <p>被索引字段值作为索引数据，叶子节点还包含了该记录数据页地址，数据和索引是分开存储的</p> <p><img src="/assets/img/image-20210901155226621.b34d7bfa.png" alt="image-20210901155226621"></p> <h2 id="_4、查询语句执行流程"><a href="#_4、查询语句执行流程" class="header-anchor">#</a> 4、查询语句执行流程</h2> <p><strong>执行 SQL 语句 select * from user where id = 1 时发生了什么</strong></p> <p><img src="/assets/img/image-20210902082718756.5ba275bc.png" alt="image-20210902082718756"></p> <ol><li><p>连接器：负责建立连接、检查权限、连接超时时间由 wait_timeout 控制，默认 8 小时</p></li> <li><p>查询缓存：会将 SQL 和查询结果以键值对方式进行缓存，修改操作会以表单位导致缓存失效</p></li> <li><p>分析器：词法、语法分析</p></li> <li><p>优化器：决定用哪个索引，决定表的连接顺序等</p></li> <li><p>执行器：根据存储引擎类型，调用存储引擎接口</p></li> <li><p>存储引擎：数据的读写接口，索引、表都在此层实现</p></li></ol> <h2 id="_5、undo-log-与-redo-log"><a href="#_5、undo-log-与-redo-log" class="header-anchor">#</a> 5、undo log 与 redo log</h2> <h4 id="_1、undo-log"><a href="#_1、undo-log" class="header-anchor">#</a> 1、undo log</h4> <ul><li>回滚数据，以行为单位，记录数据每次的变更，一行记录有多个版本并存</li> <li>多版本并发控制，即快照读（也称为一致性读），让查询操作可以去访问历史版本</li></ul> <p><img src="/assets/img/image-20210902083051903.30d2a51b.png" alt="image-20210902083051903"></p> <ol><li>每个事务会按照开始时间，分配一个单调递增的事务编号 trx id</li> <li>每次事务的改动都会以行为单位记入回滚日志，包括当时的事务编号，改动的值等</li> <li>查询操作，事务编号大于自己的数据是不可见的，事务编号小于等于自己的数据才是可见的</li></ol> <ul><li>例如图中红色事务看不到 trx id=102 以及 trx id=101 的数据，只有 trx id=99 的数据对它可见</li></ul> <h4 id="_2、redo-log"><a href="#_2、redo-log" class="header-anchor">#</a> 2、redo log</h4> <p>redo log 的作用主要是实现 ACID 中的持久性，保证提交的数据不丢失</p> <ul><li>它记录了事务提交的变更操作，服务器意外宕机重启时，利用 redo log 进行回放，重新执行已提交的变更操作</li> <li>事务提交时，首先将变更写入 redo log，事务就视为成功。至于数据页（表、索引）上的变更，可以放在后面慢慢做
<ul><li>数据页上的变更宕机丢失也没事，因为 redo log 里已经记录了</li> <li>数据页在磁盘上位置随机，写入速度慢，redo log 的写入是顺序的速度快</li></ul></li></ul> <p>它由两部分组成，内存中的 redo log buffer，磁盘上的 redo log file</p> <ul><li>redo log file 由一组文件组成，当写满了会循环覆盖较旧的日志，这意味着不能无限依赖 redo log，更早的数据恢复需要 binlog</li> <li>buffer 和 file 两部分组成意味着，写入了文件才真正安全，同步策略由参数 innodb_flush_log_at_trx_commit  控制
<ul><li>0 - 每隔 1s 将日志 write and flush 到磁盘</li> <li>1 - 每次事务提交将日志 write and flush（默认值）</li> <li>2 - 每次事务提交将日志 write，每隔 1s flush 到磁盘，意味着 write 意味着写入操作系统缓存，如果 MySQL 挂了，而操作系统没挂，那么数据不会丢失</li></ul></li></ul> <h2 id="_6、mysql锁"><a href="#_6、mysql锁" class="header-anchor">#</a> 6、MySQL锁</h2> <h4 id="_1、全局锁"><a href="#_1、全局锁" class="header-anchor">#</a> 1、全局锁</h4> <p>用作全量备份时，保证<strong>表与表之间的数据一致性</strong></p> <p>如果不加任何包含，数据备份时就可能产生不一致的情况，如下图所示</p> <p><img src="/assets/img/image-20210902090302805.350b17e9.png" alt="image-20210902090302805"></p> <p>全局锁的语法：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>flush <span class="token keyword">tables</span> <span class="token keyword">with</span> <span class="token keyword">read</span> <span class="token keyword">lock</span><span class="token punctuation">;</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>使用全局读锁锁定所有数据库的所有表。这时会阻塞其它所有 DML 以及 DDL 操作，这样可以避免备份过程中的数据不一致。接下来可以执行备份，最后用 unlock tables 来解锁</li></ul> <blockquote><p><em><strong>注意</strong></em></p> <p>但 flush tables 属于比较重的操作，可以使用 --single-transaction 参数来完成不加锁的一致性备份（仅针对 InnoDB 引擎的表）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqldump <span class="token comment">--single-transaction -uroot -p test &gt; 1.sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <h4 id="_2、表级锁"><a href="#_2、表级锁" class="header-anchor">#</a> 2、表级锁</h4> <h5 id="_1、表锁"><a href="#_1、表锁" class="header-anchor">#</a> 1、表锁</h5> <blockquote><ul><li>语法：加锁 lock tables 表名 read/write，解锁 unlock tables</li> <li>缺点：粒度较粗，在 InnoDB 引擎很少使用</li></ul></blockquote> <h5 id="_2、-元数据锁"><a href="#_2、-元数据锁" class="header-anchor">#</a> 2、 元数据锁</h5> <blockquote><ul><li><p>即 metadata-lock（MDL），主要是为<strong>了避免 DML 与 DDL 冲突</strong>，DML 的元数据锁之间不互斥</p></li> <li><p>加元数据锁的几种情况</p> <ul><li><code>lock tables read/write</code>，类型为 SHARED_READ_ONLY 和 SHARED_NO_READ_WRITE</li> <li><code>alter table</code>，类型为 EXCLUSIVE，与其它 MDL 都互斥</li> <li><code>select，select … lock in share mode</code>，类型为 SHARED_READ</li> <li><code>insert，update，delete，select for update</code>，类型为 SHARED_WRITE</li></ul></li> <li><p>查看元数据锁（适用于 MySQL 8.0 以上版本）</p> <p><code>select object_type,object_schema,object_name,lock_type,lock_duration from performance_schema.metadata_locks;</code></p></li></ul></blockquote> <h5 id="_3、is-意向共享-与-ix-意向排他"><a href="#_3、is-意向共享-与-ix-意向排他" class="header-anchor">#</a> 3、IS（意向共享） 与 IX（意向排他）</h5> <ul><li>主要是<strong>避免 DML 与表锁冲突</strong>，DML 主要目的是加行锁，为了让表锁不用检查每行数据是否加锁，加意向锁（表级）来减少表锁的判断，意向锁之间不会互斥</li> <li>加意向表锁的几种情况
<ul><li><code>select … lock in share mode</code> 会加 IS 锁</li> <li><code>insert，update，delete， select … for update</code> 会加 IX 锁</li></ul></li> <li>查看意向表锁（适用于 MySQL 8.0 以上版本）
<ul><li>select object_schema,object_name,index_name,lock_type,lock_mode,lock_data from performance_schema.data_locks;</li></ul></li></ul> <h4 id="_3、行级锁"><a href="#_3、行级锁" class="header-anchor">#</a> 3、行级锁</h4> <ul><li><p>种类</p> <ul><li>行锁 – 在 RC 下，锁住的是行，防止其他事务对此行 update 或 delete</li> <li>间隙锁 – 在 RR 下，锁住的是间隙，防止其他事务在这个间隙 insert 产生幻读</li> <li>临键锁 – 在 RR 下，锁住的是前面间隙+行，特定条件下可优化为行锁</li></ul></li> <li><p>查看行级锁</p> <ul><li><code>select object_schema,object_name,index_name,lock_type,lock_mode,lock_data from performance_schema.data_locks where object_name='表名';</code></li></ul></li></ul> <blockquote><p><em><strong>注意</strong></em></p> <ul><li>它们锁定的其实都是<strong>索引</strong>上的行与间隙，根据索引的有序性来确定间隙</li></ul></blockquote> <p>测试数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> t <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>age <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'wangwu'</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'zhang'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'zhang'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><strong>说明</strong></p> <ul><li>1,2,3,4 之间其实并不可能有间隙</li> <li>4 与 8 之间有间隙</li> <li>8 与 12 之间有间隙</li> <li>12 与正无穷大之间有间隙</li> <li>其实我们的例子中还有负无穷大与 1 之间的间隙，想避免负数可以通过建表时选择数据类型为 unsigned int</li></ul></blockquote> <p>间隙锁例子</p> <p>事务1：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">begin</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">9</span> <span class="token keyword">for</span> <span class="token keyword">update</span><span class="token punctuation">;</span> <span class="token comment">/* 锁住的是 8 与 12 之间的间隙 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>事务2：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> t <span class="token keyword">set</span> age<span class="token operator">=</span><span class="token number">100</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">/* 不会阻塞 */</span>
<span class="token keyword">update</span> t <span class="token keyword">set</span> age<span class="token operator">=</span><span class="token number">100</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span> <span class="token comment">/* 不会阻塞 */</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'aaa'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 会阻塞 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>临键锁和记录锁例子</p> <p>事务1：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">begin</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> id <span class="token operator">&gt;=</span> <span class="token number">8</span> <span class="token keyword">for</span> <span class="token keyword">update</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>临键锁锁定的是左开右闭的区间，与上条查询条件相关的区间有 (4,8]，(8,12]，(12,+∞)</li> <li>临键锁在某些条件下可以被优化为记录锁，例如 (4,8] 被优化为只针对 8 的记录锁，前面的区间不会锁住</li></ul> <p>事务2：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'aaa'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 不会阻塞 */</span>
<span class="token keyword">update</span> t <span class="token keyword">set</span> age<span class="token operator">=</span><span class="token number">100</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">/* 会阻塞 */</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'aaa'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 会阻塞 */</span>
<span class="token keyword">update</span> t <span class="token keyword">set</span> age<span class="token operator">=</span><span class="token number">100</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span> <span class="token comment">/* 会阻塞 */</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">'aaa'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 会阻塞 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/interview/database/MySQL.html" class="prev">
          MySQL
        </a></span> <span class="next"><a href="/interview/framework/Spring.html">
          Spring
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/interview/database/MySQLTopics.html#_1、mysql-事务隔离级别" class="sidebar-link reco-side-_1、mysql-事务隔离级别" data-v-b57cc07c>1、MySQL 事务隔离级别</a></li><li class="level-2" data-v-b57cc07c><a href="/interview/database/MySQLTopics.html#_2、快照读与当前读" class="sidebar-link reco-side-_2、快照读与当前读" data-v-b57cc07c>2、快照读与当前读</a></li><li class="level-2" data-v-b57cc07c><a href="/interview/database/MySQLTopics.html#_3、innodb-vs-myisam" class="sidebar-link reco-side-_3、innodb-vs-myisam" data-v-b57cc07c>3、InnoDB vs MyISAM</a></li><li class="level-2" data-v-b57cc07c><a href="/interview/database/MySQLTopics.html#_4、查询语句执行流程" class="sidebar-link reco-side-_4、查询语句执行流程" data-v-b57cc07c>4、查询语句执行流程</a></li><li class="level-2" data-v-b57cc07c><a href="/interview/database/MySQLTopics.html#_5、undo-log-与-redo-log" class="sidebar-link reco-side-_5、undo-log-与-redo-log" data-v-b57cc07c>5、undo log 与 redo log</a></li><li class="level-2" data-v-b57cc07c><a href="/interview/database/MySQLTopics.html#_6、mysql锁" class="sidebar-link reco-side-_6、mysql锁" data-v-b57cc07c>6、MySQL锁</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/assets/js/app.f8e868ec.js" defer></script><script src="/assets/js/11.ed1ff478.js" defer></script><script src="/assets/js/1.106fe0cd.js" defer></script><script src="/assets/js/24.ca85beba.js" defer></script>
  </body>
</html>
