import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as r,a as n,b as s,d as e,e as p}from"./app-f55ccf80.js";const l={},i=n("h4",{id:"_1、dubbo",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1、dubbo","aria-hidden":"true"},"#"),s(" 1、dubbo")],-1),u=n("p",null,"Apache Dubbo |ˈdʌbəʊ| 是一款高性能、轻量级的开源Java RPC框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。",-1),k={href:"https://dubbo.apache.org/en-us/",target:"_blank",rel:"noopener noreferrer"},d=p('<p><img src="https://raw.githubusercontent.com/yhx1001/PicGo/img/image-20200331123547783.png" alt="image-20200331123547783" loading="lazy"></p><p>从github上下载dubbo-admin，解压到当前文件夹，然后命令行执行mvn clean package进行打包</p><h4 id="_2、zookeeper-动物园管理员" tabindex="-1"><a class="header-anchor" href="#_2、zookeeper-动物园管理员" aria-hidden="true">#</a> 2、Zookeeper(动物园管理员)</h4><p><img src="https://raw.githubusercontent.com/yhx1001/PicGo/img/image-20200331124428849.png" alt="image-20200331124428849" loading="lazy"></p><blockquote><p>一句话：<strong>ZooKeeper 是一个分布式协调技术、高性能的，开源的分布式系统的协调(Coordination)服务，是 Google的 Chubby 一个开源的实现，是 Hadoop 和 Hbase 的重要组件。它是一个为分布式应用程序一致性和分布式协调技术服务的软件</strong></p></blockquote><p><strong><strong>ZooKeeper=类似Unix 文件系统+通知机制+Znode 节点</strong></strong></p><p><strong>作用：服务注册+分布式系统的一致性通知协调</strong></p>',7),v={href:"https://zookeeper.apache.org/",target:"_blank",rel:"noopener noreferrer"},g=p('<h5 id="_1、统一命名服务" tabindex="-1"><a class="header-anchor" href="#_1、统一命名服务" aria-hidden="true">#</a> 1、统一命名服务</h5><p><strong>统一命名服务（Name Service 如Dubbo 服务注册中心)</strong></p><p>Dubbo 是一个分布式服务框架，致力于提供高性能和透明化的RPC 远程服务调用方案，是阿里巴巴SOA 服务化治</p><p>理方案的核心框架，每天为2,000+个服务提供3,000,000,000+次访问量支持，并被广泛应用于阿里巴巴集团的成</p><p>员站点。</p><p><strong>在Dubbo 实现中：</strong></p><p>服务提供者在启动的时候，向ZK 上的指定节点/dubbo/${serviceName}/providers 目录下写入自己的URL 地址，</p><p>这个操作就完成了服务的发布。服务消费者启动的时候， 订阅/dubbo/${serviceName}/providers 目录下的提供</p><p>者URL 地址， 并向/dubbo/${serviceName} /consumers 目录下写入自己的URL 地址。</p><p>注意，所有向ZooKeeper 上注册的地址都是临时节点，这样就能够保证服务提供者和消费者能够自动感应资源的</p><p>变化。另外，Dubbo 还有针对服务粒度的监控，方法是订阅/dubbo/${serviceName}目录下所有提供者和消费者</p><p>的信息。</p><h5 id="_2、zookeeper安装-windows" tabindex="-1"><a class="header-anchor" href="#_2、zookeeper安装-windows" aria-hidden="true">#</a> 2、Zookeeper安装（Windows）</h5><p>从官网中下载解压</p><p><img src="https://raw.githubusercontent.com/yhx1001/PicGo/img/image-20200331125329183.png" alt="image-20200331125329183" loading="lazy"></p><p><img src="https://raw.githubusercontent.com/yhx1001/PicGo/img/image-20200331125422183.png" alt="image-20200331125422183" loading="lazy"></p><p>配置文件相关参数</p><p>**1、tickTime：**通信心跳数,<strong>Zookeeper 服务器心跳时间</strong>，单位毫秒</p><p>ZooKeeper 使用的基本时间， 服务器之间或客户端与服务器之间维持心跳的时间间隔，也就是每个tickTime 时</p><p>间就会发送一个心跳,时间单位为毫秒。</p><p>它用于心跳机制，并且设置最小的session 超时时间为两倍心跳时间.(session 的最小超时时间是2*tickTime。)</p><p><strong>2、initLimit：</strong></p><p>这个配置项是<strong>用来配置ZooKeeper 接收Follower 客户端</strong>（这里所说的客户端不是用户链接Zookeeper 服务</p><p>器的客户端，而是ZooKeeper 服务器集群中连接到leader 的Follower 服务器,Follower 在启动过程中，会从</p><p>Leader同步所有最新数据，然后确定自己能够对外服务的起始状态。Leader 允许Follower 在initLimit 时间内完成</p><p>这个工作）<strong>初始化连接是最长能忍受多少个心跳的时间间隔数。</strong></p><p>当已经超过10 个心跳的时间（也就是tickTime）长度后Zookeeper 服务器还没有收到客户端返回的信息，那么</p><p>表明这个客户端连接失败。总的时间长度就是102000=20 秒</p><p><strong>3、syncLimit：</strong></p><p><strong>LF 同步通信时限。集群中Leader 与Follower 之间的最大响应时间单位</strong>。</p><p>在运行过程中，Leader 负责与ZK 集群中所有机器进行通信，例如通过一些心跳检测机制，来检测机器的存活</p><p>状态,假如响应超过syncLimit * tickTime(假设syncLimit=5 ，请求和应答时间长度，最长不能超过多少个tickTime 的时间长度，总的时间长度就是5*2000=10 秒。)，Leader 认为Follwer 死掉，从服务器列表中删除Follwer。</p><p><strong>4、dataDir：</strong></p><p><strong>数据文件目录+数据持久化路径。</strong></p><p>保存内存数据库快照信息的位置，如果没有其他说明，更新的事务日志也保存到数据库。</p><p><strong>5、clientPort：</strong></p><p><strong>客户端连接端口</strong>，监听客户端连接的端口。</p><p><strong>注：</strong></p><p>启动Zookeeper 服务之前需要先安装好Java 环境</p><h4 id="_3、dubbo-zookeeper测试" tabindex="-1"><a class="header-anchor" href="#_3、dubbo-zookeeper测试" aria-hidden="true">#</a> 3、dubbo+zookeeper测试</h4>',40),m={href:"http://localhost:8080/#/%EF%BC%8C%E8%BE%93%E5%85%A5%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81root-root",target:"_blank",rel:"noopener noreferrer"},b=n("p",null,[n("img",{src:"https://raw.githubusercontent.com/yhx1001/PicGo/img/image-20200331130654548.png",alt:"image-20200331130654548",loading:"lazy"})],-1),h=n("h4",{id:"_4、整合",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_4、整合","aria-hidden":"true"},"#"),s(" 4、整合")],-1),_=p(`<li><p>导入依赖</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mvnrepository<span class="token punctuation">.</span>com<span class="token operator">/</span>artifact<span class="token operator">/</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token operator">/</span>dubbo<span class="token operator">-</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>dubbo<span class="token operator">-</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.7</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mvnrepository<span class="token punctuation">.</span>com<span class="token operator">/</span>artifact<span class="token operator">/</span>com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>sgroschupf<span class="token operator">/</span>zkclient <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>sgroschupf<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>zkclient<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mvnrepository<span class="token punctuation">.</span>com<span class="token operator">/</span>artifact<span class="token operator">/</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>curator<span class="token operator">/</span>curator<span class="token operator">-</span>framework <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>curator<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>curator<span class="token operator">-</span>framework<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">4.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mvnrepository<span class="token punctuation">.</span>com<span class="token operator">/</span>artifact<span class="token operator">/</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>curator<span class="token operator">/</span>curator<span class="token operator">-</span>recipes <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>curator<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>curator<span class="token operator">-</span>recipes<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">4.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
            
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 可能会有日志冲突，排除 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>zookeeper<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.6</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>exclusions<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>exclusion<span class="token punctuation">&gt;</span></span>
                    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>slf4j<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>slf4j<span class="token operator">:</span>slf4j<span class="token operator">-</span>log4j12<span class="token operator">:</span><span class="token number">1.7</span><span class="token number">.30</span><span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>exclusion<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>exclusions<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>provider-service</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TicketService</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span> <span class="token comment">//import org.apache.dubbo.config.annotation.Service;</span>
<span class="token annotation punctuation">@Component</span> <span class="token comment">//使用dubbo，尽量不用service注解</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TicketServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TicketService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;XIAOBEAR&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8082</span>
<span class="token comment">#服务应用名字</span>
<span class="token key attr-name">dubbo.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">provider-server</span>
<span class="token comment">#注册中心地址</span>
<span class="token key attr-name">dubbo.registry.address</span><span class="token punctuation">=</span><span class="token value attr-value">zookeeper://127.0.0.1:2181</span>
<span class="token comment">#哪些需要被注册</span>
<span class="token key attr-name">dubbo.scan.base-packages</span><span class="token punctuation">=</span><span class="token value attr-value">com.xiaobear.service</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),f=p(`<p>client-service</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span> <span class="token comment">//放到容器中 import org.springframework.stereotype.Service;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token comment">//去注册中心拿到Ticket</span>
    <span class="token annotation punctuation">@Reference</span>  <span class="token comment">//pom坐标  可以定义相同的接口名</span>
    <span class="token comment">//import org.apache.dubbo.config.annotation.Reference;</span>
    <span class="token class-name">TicketService</span> ticketService<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buyTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> ticket <span class="token operator">=</span> ticketService<span class="token punctuation">.</span><span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;在注册中心拿到一张票=&gt;&quot;</span><span class="token operator">+</span>ticket<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TicketService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),y={href:"http://localhost:8080/%EF%BC%8Csuccess%EF%BC%81%EF%BC%81%EF%BC%81",target:"_blank",rel:"noopener noreferrer"},w=n("p",null,[n("img",{src:"https://raw.githubusercontent.com/yhx1001/PicGo/img/image-20200331131518682.png",alt:"image-20200331131518682",loading:"lazy"})],-1),x=n("p",null,"当然，这只是简单的部署，还需深入学习！！！",-1);function I(z,S){const a=o("ExternalLinkIcon");return c(),r("div",null,[i,n("blockquote",null,[u,n("p",null,[s("官网："),n("a",k,[s("https://dubbo.apache.org/en-us/"),e(a)])])]),d,n("p",null,[s("官网："),n("a",v,[s("https://zookeeper.apache.org/"),e(a)])]),g,n("p",null,[s("启动zkServer.cmd以及执行dubbo的jar包，访问"),n("a",m,[s("http://localhost:8080/#/，输入用户名密码root-root"),e(a)])]),b,h,n("ol",null,[_,n("li",null,[f,n("p",null,[s("启动项目provider-service和client-service，访问"),n("a",y,[s("http://localhost:8080/，success！！！"),e(a)])])])]),w,x])}const E=t(l,[["render",I],["__file","dubbo_zookeeper.html.vue"]]);export{E as default};
