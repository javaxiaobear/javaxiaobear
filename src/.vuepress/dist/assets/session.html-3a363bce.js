import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as i,c,a as n,b as s,d as e,e as t}from"./app-aeb4ead9.js";const l="/assets/image-154cbb16.png",r={},u=t(`<h2 id="_1ã€ä¼ ç»Ÿsession" tabindex="-1"><a class="header-anchor" href="#_1ã€ä¼ ç»Ÿsession" aria-hidden="true">#</a> 1ã€ä¼ ç»ŸSession</h2><h3 id="_1ã€ä¼ ç»Ÿsessionçš„æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_1ã€ä¼ ç»Ÿsessionçš„æ¦‚è¿°" aria-hidden="true">#</a> 1ã€ä¼ ç»Ÿsessionçš„æ¦‚è¿°</h3><h4 id="_1ã€è®¤è¯è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1ã€è®¤è¯è¿‡ç¨‹" aria-hidden="true">#</a> 1ã€è®¤è¯è¿‡ç¨‹</h4><blockquote><p>1ã€ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p>2ã€æœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œåœ¨å½“å‰å¯¹è¯ï¼ˆsessionï¼‰é‡Œé¢ä¿å­˜ç›¸å…³æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·è§’è‰²ã€ç™»å½•æ—¶é—´ç­‰ç­‰ã€‚</p><p>3ã€æœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›ä¸€ä¸ª session_idï¼Œå†™å…¥ç”¨æˆ·çš„ Cookieã€‚</p><p>4ã€ç”¨æˆ·éšåçš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œéƒ½ä¼šé€šè¿‡ Cookieï¼Œå°† session_id ä¼ å›æœåŠ¡å™¨ã€‚</p><p>5ã€æœåŠ¡å™¨æ”¶åˆ° session_idï¼Œæ‰¾åˆ°å‰æœŸä¿å­˜çš„æ•°æ®ï¼Œç”±æ­¤å¾—çŸ¥ç”¨æˆ·çš„èº«ä»½ã€‚</p></blockquote><img src="https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230626152851627.png" alt="image-20230626152851627" style="zoom:80%;"><h4 id="_2ã€å­˜åœ¨çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2ã€å­˜åœ¨çš„é—®é¢˜" aria-hidden="true">#</a> 2ã€å­˜åœ¨çš„é—®é¢˜</h4><blockquote><p>æ‰©å±•æ€§ä¸å¥½ï¼Œå‘ä¸Šå›¾ä¸­ï¼Œå­˜åœ¨ä¸¤ä¸ªæœåŠ¡å™¨æ—¶ï¼Œsessionä¸èƒ½å…±äº«</p></blockquote><h4 id="_3ã€è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_3ã€è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> 3ã€è§£å†³æ–¹æ¡ˆ</h4><h5 id="_1ã€sessionå¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#_1ã€sessionå¤åˆ¶" aria-hidden="true">#</a> 1ã€sessionå¤åˆ¶</h5><blockquote><p>å°†æœåŠ¡å™¨1çš„sessionï¼Œå¤åˆ¶åˆ°æœåŠ¡å™¨2ï¼ŒåŒæ ·å°†æœåŠ¡å™¨2çš„sessionä¹Ÿå¤åˆ¶åˆ°æœåŠ¡å™¨1ï¼Œè¿™æ ·ä¸¤å°æœåŠ¡å™¨çš„sessionå°±ä¸€è‡´äº†ã€‚åƒtomcatç­‰webå®¹å™¨éƒ½æ”¯æŒsessionå¤åˆ¶çš„åŠŸèƒ½ï¼Œåœ¨<strong>åŒä¸€ä¸ªå±€åŸŸç½‘å†…</strong>ï¼Œä¸€å°æœåŠ¡å™¨çš„<code>session</code>ä¼šå¹¿æ’­ç»™å…¶ä»–æœåŠ¡å™¨ã€‚</p><p>ç¼ºç‚¹ï¼šåŒä¸€ä¸ªç½‘æ®µå†…æœåŠ¡å™¨å¤ªå¤šï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½ä¼šå»å¤åˆ¶sessionï¼Œä¼šé€ æˆæœåŠ¡å™¨å†…å­˜æµªè´¹ã€‚</p></blockquote><h5 id="_2ã€sessioné»æ€§" tabindex="-1"><a class="header-anchor" href="#_2ã€sessioné»æ€§" aria-hidden="true">#</a> 2ã€sessioné»æ€§</h5><h5 id="_3ã€redisè§£å†³åˆ†å¸ƒå¼session" tabindex="-1"><a class="header-anchor" href="#_3ã€redisè§£å†³åˆ†å¸ƒå¼session" aria-hidden="true">#</a> 3ã€Redisè§£å†³åˆ†å¸ƒå¼session</h5><p>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š<strong>ç»Ÿä¸€å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥redisä¸­ï¼Œä»redisä¸­å»è·å–ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™æ ·å°±å¯è§£å†³åˆ†å¸ƒå¼sessionäº†</strong></p><img src="https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230626155211581.png" alt="image-20230626155211581" style="zoom:50%;"><h3 id="_2ã€ä¼ ç»Ÿsessionå®æˆ˜" tabindex="-1"><a class="header-anchor" href="#_2ã€ä¼ ç»Ÿsessionå®æˆ˜" aria-hidden="true">#</a> 2ã€ä¼ ç»Ÿsessionå®æˆ˜</h3><h4 id="_1ã€sessionæœåŠ¡æ­å»º" tabindex="-1"><a class="header-anchor" href="#_1ã€sessionæœåŠ¡æ­å»º" aria-hidden="true">#</a> 1ã€sessionæœåŠ¡æ­å»º</h4><p>æ–°å»ºä¸€ä¸ªSpringBooté¡¹ç›®ï¼Œç¼–å†™controllerç±»ï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * ç™»å½•æ¥å£
     * <span class="token keyword">@param</span> <span class="token parameter">userName</span>
     * <span class="token keyword">@param</span> <span class="token parameter">password</span>
     * <span class="token keyword">@param</span> <span class="token parameter">session</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> userName<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span><span class="token punctuation">{</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;ç™»å½•æˆåŠŸ&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£
     * <span class="token keyword">@param</span> <span class="token parameter">session</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/info&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;ç™»å½•ç”¨æˆ·ä¸ºï¼š&quot;</span> <span class="token operator">+</span>  session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2ã€æµ‹è¯•" aria-hidden="true">#</a> 2ã€æµ‹è¯•</h4><h5 id="_1ã€è®¿é—®ç™»å½•æ¥å£" tabindex="-1"><a class="header-anchor" href="#_1ã€è®¿é—®ç™»å½•æ¥å£" aria-hidden="true">#</a> 1ã€è®¿é—®ç™»å½•æ¥å£</h5>`,20),d={href:"http://localhost:8081/user/login?userName=javaxiaobear&password=123456",target:"_blank",rel:"noopener noreferrer"},k=n("p",null,[n("img",{src:"https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230627155331472.png",alt:"image-20230627155331472",loading:"lazy"})],-1),h=n("h5",{id:"_2ã€è®¿é—®è·å–ç”¨æˆ·æ¥å£",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2ã€è®¿é—®è·å–ç”¨æˆ·æ¥å£","aria-hidden":"true"},"#"),s(" 2ã€è®¿é—®è·å–ç”¨æˆ·æ¥å£")],-1),m={href:"http://localhost:8081/user/info",target:"_blank",rel:"noopener noreferrer"},g=t('<p><img src="https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230627155416855.png" alt="image-20230627155416855" loading="lazy"></p><h5 id="_3ã€ä¸ºä»€ä¹ˆç¬¬äºŒæ¬¡è®¿é—®-å°±è·å–äº†åˆ°äº†ç”¨æˆ·ä¿¡æ¯å‘¢" tabindex="-1"><a class="header-anchor" href="#_3ã€ä¸ºä»€ä¹ˆç¬¬äºŒæ¬¡è®¿é—®-å°±è·å–äº†åˆ°äº†ç”¨æˆ·ä¿¡æ¯å‘¢" aria-hidden="true">#</a> 3ã€ä¸ºä»€ä¹ˆç¬¬äºŒæ¬¡è®¿é—®ï¼Œå°±è·å–äº†åˆ°äº†ç”¨æˆ·ä¿¡æ¯å‘¢ï¼Ÿ</h5><blockquote><p>ç¬¬ä¸€æ¬¡è®¿é—®ç™»å½•æ¥å£ï¼Œåç«¯ä»£ç ä¸­æˆ‘ä»¬æœ‰è®¾ç½®sessionï¼Œè®¾ç½®åï¼Œå‰ç«¯æµè§ˆå™¨è·å–åˆ°äº†ï¼Œå°±ä¼šæŠŠsessionçš„å€¼set-cookieä¸­ï¼Œå½“ç¬¬äºŒæ¬¡è¯·æ±‚infoæ¥å£æ—¶ï¼Œä¼šæºå¸¦cookieè®¿é—®åˆ°åç«¯ï¼Œé€šè¿‡cookieæŸ¥è¯¢sessionï¼Œç„¶åè¿”å›ç»™å®¢æˆ·ç«¯</p></blockquote><p><img src="https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230627155820014.png" alt="image-20230627155820014" loading="lazy"></p><h3 id="_3ã€cookieçš„ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#_3ã€cookieçš„ç‰¹æ€§" aria-hidden="true">#</a> 3ã€cookieçš„ç‰¹æ€§</h3><h4 id="_1ã€cookieä¸èƒ½è·¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#_1ã€cookieä¸èƒ½è·¨åŸŸ" aria-hidden="true">#</a> 1ã€cookieä¸èƒ½è·¨åŸŸ</h4>',6),v={href:"http://127.0.0.1:8081/user/info%EF%BC%8C%E5%89%8D%E6%8F%90%E6%98%AFlocalhost%E6%98%AF%E6%88%90%E5%8A%9F%E7%99%BB%E5%BD%95%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B",target:"_blank",rel:"noopener noreferrer"},b=n("p",null,[n("img",{src:"https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230627161125175.png",alt:"image-20230627161125175",loading:"lazy"})],-1),_=n("p",null,"å‘ç°è·å–ä¸åˆ°ç”¨æˆ·ä¿¡æ¯",-1),f=n("h4",{id:"_2ã€cookieå­˜åœ¨tomcatä¸­",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2ã€cookieå­˜åœ¨tomcatä¸­","aria-hidden":"true"},"#"),s(" 2ã€cookieå­˜åœ¨tomcatä¸­")],-1),y=n("p",null,[s("æˆ‘ä»¬æ¨¡æ‹Ÿä¸¤å°JavaæœåŠ¡å™¨ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼šé…ç½®æ˜¯"),n("code",null,"-Dserver.port=8082")],-1),x=n("p",null,[n("img",{src:"https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230627161558541.png",alt:"image-20230627161558541",loading:"lazy"})],-1),w={href:"http://localhost:8082/user/info%EF%BC%8C%E5%8F%91%E7%8E%B0%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BAcookie%E6%98%AF%E5%AD%98%E5%9C%A8tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%EF%BC%8C%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%EF%BC%81",target:"_blank",rel:"noopener noreferrer"},j=t(`<h2 id="_2ã€spring-session" tabindex="-1"><a class="header-anchor" href="#_2ã€spring-session" aria-hidden="true">#</a> 2ã€Spring-Session</h2><p>Spring-Session æä¾›äº†å¯¹Redisã€MongoDBã€MySQL ç­‰å¸¸ç”¨å­˜å‚¨çš„æ”¯æŒï¼ŒSpring-Session æä¾›ä¸ HttpSession çš„é€æ˜æ•´åˆï¼Œè¿™æ„å‘³ç€å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ Spring-Session æ”¯æŒçš„å®ç°æ–¹å¼ï¼Œåˆ‡æ¢ HttpSession è‡³ Spring-Session</p><h3 id="_1ã€å¼•å…¥ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1ã€å¼•å…¥ä¾èµ–" aria-hidden="true">#</a> 1ã€å¼•å…¥ä¾èµ–</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code> <span class="token comment">&lt;!--redisä¾èµ–é…ç½®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.session<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-session-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2ã€é…ç½®" aria-hidden="true">#</a> 2ã€é…ç½®</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">data</span><span class="token punctuation">:</span>
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
  <span class="token key atrule">session</span><span class="token punctuation">:</span>
    <span class="token key atrule">store-type</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">3000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3ã€æµ‹è¯•" aria-hidden="true">#</a> 3ã€æµ‹è¯•</h3><p>é‡æ–°å¯åŠ¨ç³»ç»Ÿï¼Œä¾æ¬¡è®¿é—®ï¼š</p>`,8),q={href:"http://localhost:8081/user/login?userName=javaxiaobear&password=123456",target:"_blank",rel:"noopener noreferrer"},E={href:"http://localhost:8081/user/info",target:"_blank",rel:"noopener noreferrer"},S={href:"http://localhost:8082/user/info",target:"_blank",rel:"noopener noreferrer"},B=n("p",null,"å‘ç°è®¿é—®8082æœåŠ¡å™¨æ—¶ï¼Œä¹Ÿè®¿é—®æˆåŠŸ",-1),A=n("h2",{id:"_3ã€jwt",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3ã€jwt","aria-hidden":"true"},"#"),s(" 3ã€JWT")],-1),J={href:"https://link.jianshu.com?t=https://tools.ietf.org/html/rfc7519",target:"_blank",rel:"noopener noreferrer"},C={href:"https://github.com/auth0/java-jwt",target:"_blank",rel:"noopener noreferrer"},I=t(`<h3 id="_1ã€å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#_1ã€å®æˆ˜" aria-hidden="true">#</a> 1ã€å®æˆ˜</h3><h4 id="_1ã€å¼•å…¥ä¾èµ–-1" tabindex="-1"><a class="header-anchor" href="#_1ã€å¼•å…¥ä¾èµ–-1" aria-hidden="true">#</a> 1ã€å¼•å…¥ä¾èµ–</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.auth0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>java-jwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ã€ç¼–å†™controllerç±»" tabindex="-1"><a class="header-anchor" href="#_2ã€ç¼–å†™controllerç±»" aria-hidden="true">#</a> 2ã€ç¼–å†™controllerç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">JWT_KEY</span> <span class="token operator">=</span> <span class="token string">&quot;javaxiaobear&quot;</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/loginWithJwt&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">loginWithJwt</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> userName<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Algorithm</span> algorithm <span class="token operator">=</span> <span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span><span class="token constant">JWT_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> userName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>algorithm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> token<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/infoWithJwt&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">infoWithJwt</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span> <span class="token class-name">String</span> token<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Algorithm</span> algorithm <span class="token operator">=</span> <span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span><span class="token constant">JWT_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">JWTVerifier</span> verifier <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span>algorithm<span class="token punctuation">)</span>
            <span class="token comment">// reusable verifier instance</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DecodedJWT</span> verify <span class="token operator">=</span> verifier<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> verify<span class="token punctuation">.</span><span class="token function">getClaim</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€æµ‹è¯•-1" tabindex="-1"><a class="header-anchor" href="#_3ã€æµ‹è¯•-1" aria-hidden="true">#</a> 3ã€æµ‹è¯•</h4>`,6),z={href:"http://localhost:8081/user/loginWithJwt?userName=javaxiaobear&password=123456",target:"_blank",rel:"noopener noreferrer"},W=n("p",null,[n("img",{src:"https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230628110821735.png",alt:"image-20230628110821735",loading:"lazy"})],-1),F=n("p",null,"è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼šlocalhost:8081/user/infoWithJwt",-1),N=n("p",null,[n("img",{src:"https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230628111802378.png",alt:"image-20230628111802378",loading:"lazy"})],-1),D=n("p",null,"å“åº”ï¼šjavaxiaobear",-1),H={href:"https://jwt.io/%E4%B8%93%E9%97%A8%E8%A7%A3%E7%A0%81%E7%9A%84%E7%BD%91%E7%AB%99",target:"_blank",rel:"noopener noreferrer"},T=t(`<p><img src="https://javaxiaobear-1301481032.cos.ap-guangzhou.myqcloud.com/picture-bed/image-20230628111933567.png" alt="image-20230628111933567" loading="lazy"></p><h3 id="_2ã€åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_2ã€åˆ†æ" aria-hidden="true">#</a> 2ã€åˆ†æ</h3><h4 id="_1ã€jwtçš„æ„æˆ" tabindex="-1"><a class="header-anchor" href="#_1ã€jwtçš„æ„æˆ" aria-hidden="true">#</a> 1ã€JWTçš„æ„æˆ</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoiamF2YXhpYW9iZWFyIn0.TOlrBtRrnJl_FfJ8YUnWLLHOIV6HKYzD1d0MBRlu9nU
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>tokenå­˜åœ¨ä¸¤ä¸ªç‚¹ï¼Œä¹Ÿå°±æ˜¯åˆ†æˆäº†ä¸‰æ®µï¼Œç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬ç§°å®ƒä¸ºå¤´éƒ¨ï¼ˆheader),ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬ç§°å…¶ä¸ºè½½è·ï¼ˆpayload, ç±»ä¼¼äºé£æœºä¸Šæ‰¿è½½çš„ç‰©å“)ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç­¾è¯ï¼ˆsignature).</p><h5 id="header" tabindex="-1"><a class="header-anchor" href="#header" aria-hidden="true">#</a> header</h5><p>jwtçš„å¤´éƒ¨æ‰¿è½½ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p><ul><li>å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯jwt</li><li>å£°æ˜åŠ å¯†çš„ç®—æ³• é€šå¸¸ç›´æ¥ä½¿ç”¨ HMAC SHA256</li></ul><p>å®Œæ•´çš„å¤´éƒ¨å°±åƒä¸‹é¢è¿™æ ·çš„JSONï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  &#39;typ&#39;<span class="token operator">:</span> &#39;JWT&#39;<span class="token punctuation">,</span>
  &#39;alg&#39;<span class="token operator">:</span> &#39;HS256&#39;
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå°†å¤´éƒ¨è¿›è¡Œbase64åŠ å¯†ï¼ˆè¯¥åŠ å¯†æ˜¯å¯ä»¥å¯¹ç§°è§£å¯†çš„),æ„æˆäº†ç¬¬ä¸€éƒ¨åˆ†.</p><h5 id="payload" tabindex="-1"><a class="header-anchor" href="#payload" aria-hidden="true">#</a> payload</h5><blockquote><p>è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ã€‚è¿™ä¸ªåå­—åƒæ˜¯ç‰¹æŒ‡é£æœºä¸Šæ‰¿è½½çš„è´§å“ï¼Œè¿™äº›æœ‰æ•ˆä¿¡æ¯åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p><ul><li>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</li><li>å…¬å…±çš„å£°æ˜</li><li>ç§æœ‰çš„å£°æ˜</li></ul></blockquote><p>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜ (å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨) ï¼š</p><ul><li>iss: jwtç­¾å‘è€…</li><li>sub: jwtæ‰€é¢å‘çš„ç”¨æˆ·</li><li>aud: æ¥æ”¶jwtçš„ä¸€æ–¹</li><li>exp: jwtçš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´</li><li>nbf: å®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥jwtéƒ½æ˜¯ä¸å¯ç”¨çš„.</li><li>iat: jwtçš„ç­¾å‘æ—¶é—´</li><li>jti: jwtçš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§token,ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚</li></ul><p>å…¬å…±çš„å£°æ˜ ï¼šå…¬å…±çš„å£°æ˜å¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯.ä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†.</p><p>ç§æœ‰çš„å£°æ˜ ï¼šç§æœ‰å£°æ˜æ˜¯æä¾›è€…å’Œæ¶ˆè´¹è€…æ‰€å…±åŒå®šä¹‰çš„å£°æ˜ï¼Œä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºbase64æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œæ„å‘³ç€è¯¥éƒ¨åˆ†ä¿¡æ¯å¯ä»¥å½’ç±»ä¸ºæ˜æ–‡ä¿¡æ¯ã€‚</p><p>å®šä¹‰ä¸€ä¸ªpayload:</p><p>{ &quot;sub&quot;: &quot;1234567890&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;admin&quot;: true }</p><p>ç„¶åå°†å…¶è¿›è¡Œbase64åŠ å¯†ï¼Œå¾—åˆ°Jwtçš„ç¬¬äºŒéƒ¨åˆ†ã€‚</p><h5 id="signature" tabindex="-1"><a class="header-anchor" href="#signature" aria-hidden="true">#</a> signature</h5><p>jwtçš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>header (base64åçš„)</li><li>payload (base64åçš„)</li><li>secret è¿™ä¸ªéƒ¨åˆ†éœ€è¦base64åŠ å¯†åçš„headerå’Œbase64åŠ å¯†åçš„payloadä½¿ç”¨.è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡headerä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ ç›secretç»„åˆåŠ å¯†ï¼Œç„¶åå°±æ„æˆäº†jwtçš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// javascript</span>
<span class="token keyword">var</span> encodedString <span class="token operator">=</span> <span class="token function">base64UrlEncode</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">+</span> <span class="token function">base64UrlEncode</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> signature <span class="token operator">=</span> <span class="token constant">HMACSHA256</span><span class="token punctuation">(</span>encodedString<span class="token punctuation">,</span> <span class="token string">&#39;secret&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†è¿™ä¸‰éƒ¨åˆ†ç”¨.è¿æ¥æˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²,æ„æˆäº†æœ€ç»ˆçš„jwt æ³¨æ„ï¼šsecretæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œjwtçš„ç­¾å‘ç”Ÿæˆä¹Ÿæ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œsecretå°±æ˜¯ç”¨æ¥è¿›è¡Œjwtçš„ç­¾å‘å’Œjwtçš„éªŒè¯ï¼Œæ‰€ä»¥ï¼Œå®ƒå°±æ˜¯ä½ æœåŠ¡ç«¯çš„ç§é’¥ï¼Œåœ¨ä»»ä½•åœºæ™¯éƒ½ä¸åº”è¯¥æµéœ²å‡ºå»ã€‚ä¸€æ—¦å®¢æˆ·ç«¯å¾—çŸ¥è¿™ä¸ªsecret, é‚£å°±æ„å‘³ç€å®¢æˆ·ç«¯æ˜¯å¯ä»¥è‡ªæˆ‘ç­¾å‘jwtäº†ã€‚</p><p>å¥½äº†ï¼Œæœ¬æ–‡å°±åˆ°è¿™é‡Œäº†ï¼å¦‚æœè§‰å¾—å†…å®¹ä¸é”™çš„è¯ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥å¸®å¿™ç‚¹èµè½¬å‘ä¸€æ³¢ï¼Œè¿™æ˜¯å¯¹æˆ‘æœ€å¤§çš„é¼“åŠ±ï¼Œæ„Ÿè°¢ğŸ™ğŸ»</p><p>èµ„æ–™è·å–ğŸ‘‡ æœ€åé¢å°±æ˜¯é¢†å–æš—å·ï¼Œå…¬ä¼—å·å›å¤å³å¯ï¼</p><p><img src="`+l+'" alt="Alt text" loading="lazy"></p>',28);function R(M,V){const a=p("ExternalLinkIcon");return i(),c("div",null,[u,n("p",null,[s("æ¥å£è·¯å¾„ï¼š"),n("a",d,[s("http://localhost:8081/user/login?userName=javaxiaobear&password=123456"),e(a)])]),k,h,n("p",null,[s("æ¥å£è·¯å¾„ï¼š"),n("a",m,[s("http://localhost:8081/user/info"),e(a)])]),g,n("p",null,[s("ä½œä¸ºå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œlocalhostå’Œ127.0.0.1å…¶å®æ²¡å•¥åŒºåˆ«ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è®¿é—®ä¸‹ï¼š"),n("a",v,[s("http://127.0.0.1:8081/user/infoï¼Œå‰ææ˜¯localhostæ˜¯æˆåŠŸç™»å½•çš„æƒ…å†µä¸‹"),e(a)])]),b,_,f,y,x,n("p",null,[s("åœ¨8081æœåŠ¡å™¨ç™»å½•çš„æƒ…å†µä¸‹ï¼Œè®¿é—®ï¼š"),n("a",w,[s("http://localhost:8082/user/infoï¼Œå‘ç°è·å–ä¸åˆ°ç™»å½•ç”¨æˆ·ï¼Œè¿™æ˜¯å› ä¸ºcookieæ˜¯å­˜åœ¨tomcatæœåŠ¡å™¨ä¸­ï¼Œè·å–ä¸åˆ°ï¼"),e(a)])]),j,n("ul",null,[n("li",null,[n("a",q,[s("http://localhost:8081/user/login?userName=javaxiaobear&password=123456"),e(a)])]),n("li",null,[n("a",E,[s("http://localhost:8081/user/info"),e(a)])]),n("li",null,[n("a",S,[s("http://localhost:8082/user/info"),e(a)])])]),B,A,n("blockquote",null,[n("p",null,[s("Json web token (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäºJSONçš„å¼€æ”¾æ ‡å‡†ï¼ˆ"),n("a",J,[s("(RFC 7519"),e(a)]),s(").è¯¥tokenè¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWTçš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥tokenä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚")]),n("p",null,[s("å®˜ç½‘ï¼š"),n("a",C,[s("https://github.com/auth0/java-jwt"),e(a)])])]),I,n("p",null,[s("ç™»å½•æ¥å£ï¼š"),n("a",z,[s("http://localhost:8081/user/loginWithJwt?userName=javaxiaobear&password=123456"),e(a)])]),W,F,N,D,n("p",null,[s("è¿˜æœ‰ä¸€ç§æ–¹æ³•æŠŠè·å–åˆ°çš„tokenè§£æå‡ºæ¥ï¼Œ"),n("a",H,[s("https://jwt.io/ä¸“é—¨è§£ç çš„ç½‘ç«™"),e(a)])]),T])}const U=o(r,[["render",R],["__file","session.html.vue"]]);export{U as default};
